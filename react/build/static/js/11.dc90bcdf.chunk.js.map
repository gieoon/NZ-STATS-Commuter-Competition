{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/swr/node_modules/fast-deep-equal/index.js","../node_modules/react-is-visible/lib/index.js","../node_modules/react-is-visible/lib/withIsVisible.js","../node_modules/@babel/runtime/helpers/extends.js","../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../node_modules/react-is-visible/node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/react-is-visible/lib/useIsVisible.js","../node_modules/react-use/esm/useUpdateEffect.js","../node_modules/react-use/esm/useFirstMountState.js","../node_modules/@babel/runtime/helpers/interopRequireDefault.js","../node_modules/react-is-visible/lib/VisibilityObserver.js","../../src/utils/errors.ts","../../src/utils/common.ts","../../src/types/types-internal.ts","../../src/utils/plugins.ts","../../src/core/scope.ts","../../src/core/finalize.ts","../../src/core/proxy.ts","../../src/core/immerClass.ts","../../src/core/current.ts","../../src/immer.ts","../../src/utils/env.ts","../node_modules/react-is-visible/lib/IsVisible.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/swr/esm/libs/is-document-visible.js","../node_modules/swr/esm/libs/is-online.js","../node_modules/swr/esm/libs/hash.js","../node_modules/swr/esm/cache.js","../node_modules/swr/esm/config.js","../node_modules/swr/esm/libs/throttle.js","../node_modules/swr/esm/swr-config-context.js","../node_modules/swr/esm/use-swr.js","../node_modules/swr/esm/use-swr-pages.js","../node_modules/swr/esm/index.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_objectWithoutProperties","excluded","sourceSymbolKeys","indexOf","prototype","propertyIsEnumerable","call","isArray","Array","keyList","hasProp","hasOwnProperty","module","exports","equal","a","b","arrA","arrB","dateA","Date","dateB","getTime","regexpA","RegExp","regexpB","toString","_interopRequireDefault","require","value","get","_withIsVisible","withIsVisible","_IsVisible","default","_useIsVisible","_VisibilityObserver","_extends2","_objectWithoutProperties2","_react","_hoistNonReactStatics","getDisplayName","WrappedComponent","displayName","name","defaultOptions","once","_ref","undefined","WithIsVisible","_ref2","forwardedRef","props","createElement","children","isVisible","ref","forwardRef","concat","_extends","assign","this","objectWithoutPropertiesLoose","sourceKeys","ReactIs","REACT_STATICS","childContextTypes","contextType","contextTypes","defaultProps","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","mixins","propTypes","type","KNOWN_STATICS","caller","callee","arity","MEMO_STATICS","compare","TYPE_STATICS","getStatics","component","isMemo","ForwardRef","render","getOwnPropertyNames","getPrototypeOf","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","targetStatics","sourceStatics","descriptor","e","_typeof","assertThisInitialized","self","_typeof2","obj","Symbol","iterator","constructor","_getPrototypeOf","o","setPrototypeOf","__proto__","subClass","superClass","TypeError","create","writable","configurable","_setPrototypeOf","p","_slicedToArray2","_default","nodeRef","_useState","useState","_useState2","setVisible","handleVisibilityChange","isIntersecting","unwatch","current","useEffect","watch","useUpdateEffect","effect","deps","isFirstMount","isFirst","useRef","useFirstMountState","__esModule","intersectionObserver","intersectionObserverOptions","subscribers","WeakMap","handleIntersections","entries","entry","domNode","unobserve","delete","getSubscribers","setIntersectionObserverOptions","options","callback","has","set","IntersectionObserver","observe","die","error","args","msg","Error","join","isDraft","DRAFT_STATE","isDraftable","proto","DRAFTABLE","isMap","isSet","each","iter","getArchtype","index","thing","state","type_","prop","propOrOldValue","t","add","is","x","y","hasMap","Map","hasSet","Set","latest","copy_","base_","shallowCopy","base","slice","descriptors","desc","freeze","deep","isFrozen","clear","dontMutateFrozenCollections","getPlugin","pluginKey","plugin","plugins","getCurrentScope","currentScope","usePatchesInScope","scope","patchListener","patches_","inversePatches_","patchListener_","revokeScope","leaveScope","drafts_","revokeDraft","parent_","enterScope","immer","immer_","canAutoFreeze_","unfinalizedDrafts_","draft","revoke_","revoked_","processResult","result","baseDraft","isReplaced","useProxies_","willFinalizeES5_","modified_","finalize","maybeFreeze","generateReplacementPatches_","NOTHING","rootScope","path","childValue","finalizeProperty","scope_","finalized_","draft_","generatePatches_","parentState","targetObject","rootPath","res","assigned_","autoFreeze_","peek","markChanged","prepareCopy","createProxy","parent","proxyMap_","proxySet_","isManual_","traps","objectTraps","arrayTraps","Proxy","revocable","revoke","proxy","createES5Proxy_","currentImpl","copy","archType","hasChanges_","copyHelper","from","hasSymbol","hasProxies","Reflect","deleteProperty","owner","fn","config","useProxies","setUseProxies","autoFreeze","setAutoFreeze","produce","bind","produceWithPatches","recipe","defaultBase","_this","hasError","Promise","then","arg1","arg2","patches","inversePatches","_this2","ip","createDraft","finishDraft","applyPatches","patch","op","applyPatchesImpl","applyPatches_","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf3","_assertThisInitialized2","_inherits2","_defineProperty2","_reactDom","_React$PureComponent","IsVisible","_getPrototypeOf2","_len","_key","setState","findDOMNode","renderedChildren","Children","only","PureComponent","ReferenceError","isDocumentVisible","document","visibilityState","isOnline","navigator","onLine","table","counter","cache","Cache","initialData","__cache","__listeners","serializeKey","shouldNotify","mutate","notify","err","_hash","String","hash","subscribe","listener","isSubscribed","_i","_a","CONCURRENT_PROMISES","CONCURRENT_PROMISES_TS","FOCUS_REVALIDATORS","CACHE_REVALIDATORS","MUTATION_TS","slowConnection","window","effectiveType","defaultConfig","onLoadingSlow","onSuccess","onError","onErrorRetry","_","__","revalidate","opts","errorRetryCount","retryCount","count","Math","min","timeout","random","errorRetryInterval","setTimeout","focusThrottleInterval","dedupingInterval","loadingTimeout","refreshInterval","revalidateOnFocus","revalidateOnReconnect","refreshWhenHidden","refreshWhenOffline","shouldRetryOnError","suspense","deepEqual","eventsBinded","addEventListener","throttle","interval","pending","SWRConfigContext","createContext","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","next","rejected","done","__generator","body","f","g","label","sent","trys","ops","verb","n","v","pop","IS_SERVER","useIsomorphicLayoutEffect","useLayoutEffect","trigger","shouldRevalidate","keyErr","updaters","currentData","currentError","promises","all","broadcastState","data","_data","beforeMutationTs","beforeConcurrentPromisesTs","err_1","err_2","now","Provider","useSWR","fnArgs","useContext","fetcher","initialError","stateDependencies","isValidating","stateRef","rerender","dispatch","useCallback","payload","shouldUpdateState","k","unmountedRef","keyRef","eventsRef","emit","event","params","boundMutate","revalidateOpts","loading","shouldDeduping","newData","startAt","newState","err_3","dedupe","currentHookData","latestKeyedData","onFocus","softRevalidate","revalidateOnMount","onUpdate","updatedData","updatedError","needUpdate","reconnect","revalidators","removeEventListener","timer","tick","clearTimeout","latestData","latestError","useMemo"],"mappings":"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","file":"static/js/11.dc90bcdf.chunk.js","sourcesContent":["import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a!==a && b!==b;\n};\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"withIsVisible\", {\n  enumerable: true,\n  get: function get() {\n    return _withIsVisible.withIsVisible;\n  }\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _IsVisible.default;\n  }\n});\nObject.defineProperty(exports, \"useIsVisible\", {\n  enumerable: true,\n  get: function get() {\n    return _useIsVisible.default;\n  }\n});\nObject.defineProperty(exports, \"VisibilityObserver\", {\n  enumerable: true,\n  get: function get() {\n    return _VisibilityObserver.default;\n  }\n});\n\nvar _withIsVisible = require(\"./withIsVisible\");\n\nvar _IsVisible = _interopRequireDefault(require(\"./IsVisible\"));\n\nvar _useIsVisible = _interopRequireDefault(require(\"./useIsVisible\"));\n\nvar _VisibilityObserver = _interopRequireDefault(require(\"./VisibilityObserver\"));","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withIsVisible = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _hoistNonReactStatics = _interopRequireDefault(require(\"hoist-non-react-statics\"));\n\nvar _IsVisible = _interopRequireDefault(require(\"./IsVisible\"));\n\nvar getDisplayName = function getDisplayName(WrappedComponent) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n};\n\nvar defaultOptions = {\n  once: false\n};\n\nvar withIsVisible = function withIsVisible(WrappedComponent) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultOptions,\n      once = _ref.once;\n\n  var WithIsVisible = function WithIsVisible(_ref2) {\n    var forwardedRef = _ref2.forwardedRef,\n        props = (0, _objectWithoutProperties2.default)(_ref2, [\"forwardedRef\"]);\n    return _react.default.createElement(_IsVisible.default, {\n      once: once,\n      children: function children(isVisible) {\n        return _react.default.createElement(WrappedComponent, (0, _extends2.default)({}, props, {\n          isVisible: isVisible,\n          ref: forwardedRef\n        }));\n      }\n    });\n  };\n  /* Display name */\n\n\n  WithIsVisible.displayName = \"WithIsVisible(\".concat(getDisplayName(WrappedComponent), \")\");\n  /* Passes non-React static methods */\n\n  (0, _hoistNonReactStatics.default)(WithIsVisible, WrappedComponent);\n  /* Forward refs */\n\n  function forwardRef(props, ref) {\n    return _react.default.createElement(WithIsVisible, (0, _extends2.default)({}, props, {\n      forwardedRef: ref\n    }));\n  }\n\n  forwardRef.displayName = \"withIsVisible(\".concat(getDisplayName(WrappedComponent), \")\");\n  return _react.default.forwardRef(forwardRef);\n};\n\nexports.withIsVisible = withIsVisible;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","'use strict';\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar ReactIs = require('react-is');\nvar REACT_STATICS = {\n    childContextTypes: true,\n    contextType: true,\n    contextTypes: true,\n    defaultProps: true,\n    displayName: true,\n    getDefaultProps: true,\n    getDerivedStateFromError: true,\n    getDerivedStateFromProps: true,\n    mixins: true,\n    propTypes: true,\n    type: true\n};\n\nvar KNOWN_STATICS = {\n    name: true,\n    length: true,\n    prototype: true,\n    caller: true,\n    callee: true,\n    arguments: true,\n    arity: true\n};\n\nvar FORWARD_REF_STATICS = {\n    '$$typeof': true,\n    render: true,\n    defaultProps: true,\n    displayName: true,\n    propTypes: true\n};\n\nvar MEMO_STATICS = {\n    '$$typeof': true,\n    compare: true,\n    defaultProps: true,\n    displayName: true,\n    propTypes: true,\n    type: true\n};\n\nvar TYPE_STATICS = {};\nTYPE_STATICS[ReactIs.ForwardRef] = FORWARD_REF_STATICS;\n\nfunction getStatics(component) {\n    if (ReactIs.isMemo(component)) {\n        return MEMO_STATICS;\n    }\n    return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\n\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n    if (typeof sourceComponent !== 'string') {\n        // don't hoist over string (html) components\n\n        if (objectPrototype) {\n            var inheritedComponent = getPrototypeOf(sourceComponent);\n            if (inheritedComponent && inheritedComponent !== objectPrototype) {\n                hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n            }\n        }\n\n        var keys = getOwnPropertyNames(sourceComponent);\n\n        if (getOwnPropertySymbols) {\n            keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n        }\n\n        var targetStatics = getStatics(targetComponent);\n        var sourceStatics = getStatics(sourceComponent);\n\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n                var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n                try {\n                    // Avoid failures from read-only properties\n                    defineProperty(targetComponent, key, descriptor);\n                } catch (e) {}\n            }\n        }\n\n        return targetComponent;\n    }\n\n    return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = require(\"react\");\n\nvar _VisibilityObserver = _interopRequireDefault(require(\"./VisibilityObserver\"));\n\nvar defaultOptions = {\n  once: false\n};\n\nfunction useIsVisible(nodeRef) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultOptions,\n      once = _ref.once;\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      isVisible = _useState2[0],\n      setVisible = _useState2[1];\n\n  function handleVisibilityChange(_ref2) {\n    var isIntersecting = _ref2.isIntersecting;\n    setVisible(isIntersecting);\n\n    if (isIntersecting && once) {\n      _VisibilityObserver.default.unwatch(nodeRef.current);\n    }\n  }\n\n  (0, _react.useEffect)(function () {\n    return _VisibilityObserver.default.watch(nodeRef.current, handleVisibilityChange);\n  }, [nodeRef, handleVisibilityChange]);\n  return isVisible;\n}\n\nvar _default = useIsVisible;\nexports.default = _default;","/* eslint-disable */\nimport { useEffect } from 'react';\nimport { useFirstMountState } from './useFirstMountState';\nvar useUpdateEffect = function (effect, deps) {\n    var isFirstMount = useFirstMountState();\n    useEffect(function () {\n        if (!isFirstMount) {\n            return effect();\n        }\n    }, deps);\n};\nexport default useUpdateEffect;\n","import { useRef } from 'react';\nexport function useFirstMountState() {\n    var isFirst = useRef(true);\n    if (isFirst.current) {\n        isFirst.current = false;\n        return true;\n    }\n    return isFirst.current;\n}\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar intersectionObserver;\nvar intersectionObserverOptions = {};\nvar subscribers = new WeakMap();\n\nvar handleIntersections = function handleIntersections(entries) {\n  return entries.forEach(function (entry) {\n    return subscribers.get(entry.target).call(null, entry);\n  });\n};\n\nvar getIntersectionObserver = function getIntersectionObserver() {\n  if (!intersectionObserver) {\n    intersectionObserver = new IntersectionObserver(handleIntersections, intersectionObserverOptions);\n  }\n\n  return intersectionObserver;\n};\n\nvar setIntersectionObserverOptions = function setIntersectionObserverOptions(options) {\n  if (intersectionObserver) {\n    return;\n  }\n\n  intersectionObserverOptions = options;\n};\n\nvar watch = function watch(domNode, callback) {\n  if (!domNode || subscribers.has(domNode)) {\n    return;\n  }\n\n  subscribers.set(domNode, callback);\n  getIntersectionObserver().observe(domNode);\n  return function () {\n    return unwatch(domNode);\n  };\n};\n\nvar unwatch = function unwatch(domNode) {\n  intersectionObserver.unobserve(domNode);\n  subscribers.delete(domNode);\n};\n\nvar getSubscribers = function getSubscribers() {\n  return subscribers;\n};\n\nvar _default = {\n  getSubscribers: getSubscribers,\n  setIntersectionObserverOptions: setIntersectionObserverOptions,\n  unwatch: unwatch,\n  watch: watch\n};\nexports.default = _default;","const errors = {\n\t0: \"Illegal state\",\n\t1: \"Immer drafts cannot have computed properties\",\n\t2: \"This object has been frozen and should not be mutated\",\n\t3(data: any) {\n\t\treturn (\n\t\t\t\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" +\n\t\t\tdata\n\t\t)\n\t},\n\t4: \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n\t5: \"Immer forbids circular references\",\n\t6: \"The first or second argument to `produce` must be a function\",\n\t7: \"The third argument to `produce` must be a function or undefined\",\n\t8: \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n\t9: \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n\t10: \"The given draft is already finalized\",\n\t11: \"Object.defineProperty() cannot be used on an Immer draft\",\n\t12: \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n\t13: \"Immer only supports deleting array indices\",\n\t14: \"Immer only supports setting array indices and the 'length' property\",\n\t15(path: string) {\n\t\treturn \"Cannot apply patch, path doesn't resolve: \" + path\n\t},\n\t16: 'Sets cannot have \"replace\" patches.',\n\t17(op: string) {\n\t\treturn \"Unsupported patch operation: \" + op\n\t},\n\t18(plugin: string) {\n\t\treturn `The plugin for '${plugin}' has not been loaded into Immer. To enable the plugin, import and call \\`enable${plugin}()\\` when initializing your application.`\n\t},\n\t19: \"plugin not loaded\",\n\t20: \"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",\n\t21(thing: string) {\n\t\treturn `produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${thing}'`\n\t},\n\t22(thing: string) {\n\t\treturn `'current' expects a draft, got: ${thing}`\n\t},\n\t23(thing: string) {\n\t\treturn `'original' expects a draft, got: ${thing}`\n\t}\n} as const\n\nexport function die(error: keyof typeof errors, ...args: any[]): never {\n\tif (__DEV__) {\n\t\tconst e = errors[error]\n\t\tconst msg = !e\n\t\t\t? \"unknown error nr: \" + error\n\t\t\t: typeof e === \"function\"\n\t\t\t? e.apply(null, args as any)\n\t\t\t: e\n\t\tthrow new Error(`[Immer] ${msg}`)\n\t}\n\tthrow new Error(\n\t\t`[Immer] minified error nr: ${error}${\n\t\t\targs.length ? \" \" + args.join(\",\") : \"\"\n\t\t}. Find the full error at: https://bit.ly/3cXEKWf`\n\t)\n}\n","import {\n\tDRAFT_STATE,\n\tDRAFTABLE,\n\thasSet,\n\tObjectish,\n\tDrafted,\n\tAnyObject,\n\tAnyMap,\n\tAnySet,\n\tImmerState,\n\thasMap,\n\tArchtypeObject,\n\tArchtypeArray,\n\tArchtypeMap,\n\tArchtypeSet,\n\tdie\n} from \"../internal\"\n\n/** Returns true if the given value is an Immer draft */\n/*#__PURE__*/\nexport function isDraft(value: any): boolean {\n\treturn !!value && !!value[DRAFT_STATE]\n}\n\n/** Returns true if the given value can be drafted by Immer */\n/*#__PURE__*/\nexport function isDraftable(value: any): boolean {\n\tif (!value) return false\n\treturn (\n\t\tisPlainObject(value) ||\n\t\tArray.isArray(value) ||\n\t\t!!value[DRAFTABLE] ||\n\t\t!!value.constructor[DRAFTABLE] ||\n\t\tisMap(value) ||\n\t\tisSet(value)\n\t)\n}\n\n/*#__PURE__*/\nexport function isPlainObject(value: any): boolean {\n\tif (!value || typeof value !== \"object\") return false\n\tconst proto = Object.getPrototypeOf(value)\n\treturn !proto || proto === Object.prototype\n}\n\n/** Get the underlying object that is represented by the given draft */\n/*#__PURE__*/\nexport function original<T>(value: T): T | undefined\nexport function original(value: Drafted<any>): any {\n\tif (!isDraft(value)) die(23, value)\n\treturn value[DRAFT_STATE].base_\n}\n\n/*#__PURE__*/\nexport const ownKeys: (target: AnyObject) => PropertyKey[] =\n\ttypeof Reflect !== \"undefined\" && Reflect.ownKeys\n\t\t? Reflect.ownKeys\n\t\t: typeof Object.getOwnPropertySymbols !== \"undefined\"\n\t\t? obj =>\n\t\t\t\tObject.getOwnPropertyNames(obj).concat(\n\t\t\t\t\tObject.getOwnPropertySymbols(obj) as any\n\t\t\t\t)\n\t\t: /* istanbul ignore next */ Object.getOwnPropertyNames\n\nexport function each<T extends Objectish>(\n\tobj: T,\n\titer: (key: string | number, value: any, source: T) => void,\n\tenumerableOnly?: boolean\n): void\nexport function each(obj: any, iter: any, enumerableOnly = false) {\n\tif (getArchtype(obj) === ArchtypeObject) {\n\t\t;(enumerableOnly ? Object.keys : ownKeys)(obj).forEach(key => {\n\t\t\tif (!enumerableOnly || typeof key !== \"symbol\") iter(key, obj[key], obj)\n\t\t})\n\t} else {\n\t\tobj.forEach((entry: any, index: any) => iter(index, entry, obj))\n\t}\n}\n\n/*#__PURE__*/\nexport function getArchtype(thing: any): 0 | 1 | 2 | 3 {\n\t/* istanbul ignore next */\n\tconst state: undefined | ImmerState = thing[DRAFT_STATE]\n\treturn state\n\t\t? state.type_ > 3\n\t\t\t? state.type_ - 4 // cause Object and Array map back from 4 and 5\n\t\t\t: (state.type_ as any) // others are the same\n\t\t: Array.isArray(thing)\n\t\t? ArchtypeArray\n\t\t: isMap(thing)\n\t\t? ArchtypeMap\n\t\t: isSet(thing)\n\t\t? ArchtypeSet\n\t\t: ArchtypeObject\n}\n\n/*#__PURE__*/\nexport function has(thing: any, prop: PropertyKey): boolean {\n\treturn getArchtype(thing) === ArchtypeMap\n\t\t? thing.has(prop)\n\t\t: Object.prototype.hasOwnProperty.call(thing, prop)\n}\n\n/*#__PURE__*/\nexport function get(thing: AnyMap | AnyObject, prop: PropertyKey): any {\n\t// @ts-ignore\n\treturn getArchtype(thing) === ArchtypeMap ? thing.get(prop) : thing[prop]\n}\n\n/*#__PURE__*/\nexport function set(thing: any, propOrOldValue: PropertyKey, value: any) {\n\tconst t = getArchtype(thing)\n\tif (t === ArchtypeMap) thing.set(propOrOldValue, value)\n\telse if (t === ArchtypeSet) {\n\t\tthing.delete(propOrOldValue)\n\t\tthing.add(value)\n\t} else thing[propOrOldValue] = value\n}\n\n/*#__PURE__*/\nexport function is(x: any, y: any): boolean {\n\t// From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n\tif (x === y) {\n\t\treturn x !== 0 || 1 / x === 1 / y\n\t} else {\n\t\treturn x !== x && y !== y\n\t}\n}\n\n/*#__PURE__*/\nexport function isMap(target: any): target is AnyMap {\n\treturn hasMap && target instanceof Map\n}\n\n/*#__PURE__*/\nexport function isSet(target: any): target is AnySet {\n\treturn hasSet && target instanceof Set\n}\n/*#__PURE__*/\nexport function latest(state: ImmerState): any {\n\treturn state.copy_ || state.base_\n}\n\n/*#__PURE__*/\nexport function shallowCopy(base: any) {\n\tif (Array.isArray(base)) return base.slice()\n\tconst descriptors = Object.getOwnPropertyDescriptors(base)\n\tdelete descriptors[DRAFT_STATE as any]\n\tfor (let key in descriptors) {\n\t\tconst desc = descriptors[key]\n\t\tif (desc.writable === false) {\n\t\t\tdesc.writable = true\n\t\t\tdesc.configurable = true\n\t\t}\n\t\t// like object.assign, we will read any _own_, get/set accessors. This helps in dealing\n\t\t// with libraries that trap values, like mobx or vue\n\t\t// unlike object.assign, non-enumerables will be copied as well\n\t\tif (desc.get || desc.set)\n\t\t\tdescriptors[key] = {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true, // could live with !!desc.set as well here...\n\t\t\t\tenumerable: desc.enumerable,\n\t\t\t\tvalue: base[key]\n\t\t\t}\n\t}\n\treturn Object.create(Object.getPrototypeOf(base), descriptors)\n}\n\nexport function freeze(obj: any, deep: boolean): void {\n\tif (Object.isFrozen(obj) || isDraft(obj) || !isDraftable(obj)) return\n\tif (getArchtype(obj) > 1 /* Map or Set */) {\n\t\tobj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections as any\n\t}\n\tObject.freeze(obj)\n\tif (deep) each(obj, (key, value) => freeze(value, true), true)\n}\n\nfunction dontMutateFrozenCollections() {\n\tdie(2)\n}\n\nexport function isFrozen(obj: any): boolean {\n\tif (obj == null || typeof obj !== \"object\") return true\n\t// See #600, IE dies on non-objects in Object.isFrozen\n\treturn Object.isFrozen(obj)\n}\n","import {\n\tSetState,\n\tImmerScope,\n\tProxyObjectState,\n\tProxyArrayState,\n\tES5ObjectState,\n\tES5ArrayState,\n\tMapState,\n\tDRAFT_STATE\n} from \"../internal\"\n\nexport type Objectish = AnyObject | AnyArray | AnyMap | AnySet\nexport type ObjectishNoSet = AnyObject | AnyArray | AnyMap\n\nexport type AnyObject = {[key: string]: any}\nexport type AnyArray = Array<any>\nexport type AnySet = Set<any>\nexport type AnyMap = Map<any, any>\n\nexport const ArchtypeObject = 0\nexport const ArchtypeArray = 1\nexport const ArchtypeMap = 2\nexport const ArchtypeSet = 3\n\nexport const ProxyTypeProxyObject = 0\nexport const ProxyTypeProxyArray = 1\nexport const ProxyTypeES5Object = 4\nexport const ProxyTypeES5Array = 5\nexport const ProxyTypeMap = 2\nexport const ProxyTypeSet = 3\n\nexport interface ImmerBaseState {\n\tparent_?: ImmerState\n\tscope_: ImmerScope\n\tmodified_: boolean\n\tfinalized_: boolean\n\tisManual_: boolean\n}\n\nexport type ImmerState =\n\t| ProxyObjectState\n\t| ProxyArrayState\n\t| ES5ObjectState\n\t| ES5ArrayState\n\t| MapState\n\t| SetState\n\n// The _internal_ type used for drafts (not to be confused with Draft, which is public facing)\nexport type Drafted<Base = any, T extends ImmerState = ImmerState> = {\n\t[DRAFT_STATE]: T\n} & Base\n","import {\n\tImmerState,\n\tPatch,\n\tImmerScope,\n\tDrafted,\n\tAnyObject,\n\tImmerBaseState,\n\tAnyMap,\n\tAnySet,\n\tProxyTypeES5Array,\n\tProxyTypeES5Object,\n\tProxyTypeMap,\n\tProxyTypeSet,\n\tdie\n} from \"../internal\"\n\n/** Plugin utilities */\nconst plugins: {\n\tPatches?: {\n\t\tgeneratePatches_(\n\t\t\tstate: ImmerState,\n\t\t\tbasePath: PatchPath,\n\t\t\tpatches: Patch[],\n\t\t\tinversePatches: Patch[]\n\t\t): void\n\t\tgenerateReplacementPatches_(\n\t\t\trootState: ImmerState,\n\t\t\treplacement: any,\n\t\t\tpatches: Patch[],\n\t\t\tinversePatches: Patch[]\n\t\t): void\n\t\tapplyPatches_<T>(draft: T, patches: Patch[]): T\n\t}\n\tES5?: {\n\t\twillFinalizeES5_(scope: ImmerScope, result: any, isReplaced: boolean): void\n\t\tcreateES5Proxy_<T>(\n\t\t\tbase: T,\n\t\t\tparent?: ImmerState\n\t\t): Drafted<T, ES5ObjectState | ES5ArrayState>\n\t\thasChanges_(state: ES5ArrayState | ES5ObjectState): boolean\n\t}\n\tMapSet?: {\n\t\tproxyMap_<T extends AnyMap>(target: T, parent?: ImmerState): T\n\t\tproxySet_<T extends AnySet>(target: T, parent?: ImmerState): T\n\t}\n} = {}\n\ntype Plugins = typeof plugins\n\nexport function getPlugin<K extends keyof Plugins>(\n\tpluginKey: K\n): Exclude<Plugins[K], undefined> {\n\tconst plugin = plugins[pluginKey]\n\tif (!plugin) {\n\t\tdie(__DEV__ ? 18 : 19, pluginKey)\n\t}\n\t// @ts-ignore\n\treturn plugin\n}\n\nexport function loadPlugin<K extends keyof Plugins>(\n\tpluginKey: K,\n\timplementation: Plugins[K]\n): void {\n\tplugins[pluginKey] = implementation\n}\n\n/** ES5 Plugin */\n\ninterface ES5BaseState extends ImmerBaseState {\n\tassigned_: {[key: string]: any}\n\tparent_?: ImmerState\n\trevoked_: boolean\n}\n\nexport interface ES5ObjectState extends ES5BaseState {\n\ttype_: typeof ProxyTypeES5Object\n\tdraft_: Drafted<AnyObject, ES5ObjectState>\n\tbase_: AnyObject\n\tcopy_: AnyObject | null\n}\n\nexport interface ES5ArrayState extends ES5BaseState {\n\ttype_: typeof ProxyTypeES5Array\n\tdraft_: Drafted<AnyObject, ES5ArrayState>\n\tbase_: any\n\tcopy_: any\n}\n\n/** Map / Set plugin */\n\nexport interface MapState extends ImmerBaseState {\n\ttype_: typeof ProxyTypeMap\n\tcopy_: AnyMap | undefined\n\tassigned_: Map<any, boolean> | undefined\n\tbase_: AnyMap\n\trevoked_: boolean\n\tdraft_: Drafted<AnyMap, MapState>\n}\n\nexport interface SetState extends ImmerBaseState {\n\ttype_: typeof ProxyTypeSet\n\tcopy_: AnySet | undefined\n\tbase_: AnySet\n\tdrafts_: Map<any, Drafted> // maps the original value to the draft value in the new set\n\trevoked_: boolean\n\tdraft_: Drafted<AnySet, SetState>\n}\n\n/** Patches plugin */\n\nexport type PatchPath = (string | number)[]\n","import {\n\tPatch,\n\tPatchListener,\n\tDrafted,\n\tImmer,\n\tDRAFT_STATE,\n\tImmerState,\n\tProxyTypeProxyObject,\n\tProxyTypeProxyArray,\n\tgetPlugin\n} from \"../internal\"\nimport {die} from \"../utils/errors\"\n\n/** Each scope represents a `produce` call. */\n\nexport interface ImmerScope {\n\tpatches_?: Patch[]\n\tinversePatches_?: Patch[]\n\tcanAutoFreeze_: boolean\n\tdrafts_: any[]\n\tparent_?: ImmerScope\n\tpatchListener_?: PatchListener\n\timmer_: Immer\n\tunfinalizedDrafts_: number\n}\n\nlet currentScope: ImmerScope | undefined\n\nexport function getCurrentScope() {\n\tif (__DEV__ && !currentScope) die(0)\n\treturn currentScope!\n}\n\nfunction createScope(\n\tparent_: ImmerScope | undefined,\n\timmer_: Immer\n): ImmerScope {\n\treturn {\n\t\tdrafts_: [],\n\t\tparent_,\n\t\timmer_,\n\t\t// Whenever the modified draft contains a draft from another scope, we\n\t\t// need to prevent auto-freezing so the unowned draft can be finalized.\n\t\tcanAutoFreeze_: true,\n\t\tunfinalizedDrafts_: 0\n\t}\n}\n\nexport function usePatchesInScope(\n\tscope: ImmerScope,\n\tpatchListener?: PatchListener\n) {\n\tif (patchListener) {\n\t\tgetPlugin(\"Patches\") // assert we have the plugin\n\t\tscope.patches_ = []\n\t\tscope.inversePatches_ = []\n\t\tscope.patchListener_ = patchListener\n\t}\n}\n\nexport function revokeScope(scope: ImmerScope) {\n\tleaveScope(scope)\n\tscope.drafts_.forEach(revokeDraft)\n\t// @ts-ignore\n\tscope.drafts_ = null\n}\n\nexport function leaveScope(scope: ImmerScope) {\n\tif (scope === currentScope) {\n\t\tcurrentScope = scope.parent_\n\t}\n}\n\nexport function enterScope(immer: Immer) {\n\treturn (currentScope = createScope(currentScope, immer))\n}\n\nfunction revokeDraft(draft: Drafted) {\n\tconst state: ImmerState = draft[DRAFT_STATE]\n\tif (\n\t\tstate.type_ === ProxyTypeProxyObject ||\n\t\tstate.type_ === ProxyTypeProxyArray\n\t)\n\t\tstate.revoke_()\n\telse state.revoked_ = true\n}\n","import {\n\tImmerScope,\n\tDRAFT_STATE,\n\tisDraftable,\n\tNOTHING,\n\tPatchPath,\n\teach,\n\thas,\n\tfreeze,\n\tImmerState,\n\tisDraft,\n\tSetState,\n\tset,\n\tProxyTypeES5Object,\n\tProxyTypeES5Array,\n\tProxyTypeSet,\n\tgetPlugin,\n\tdie,\n\trevokeScope,\n\tisFrozen,\n\tshallowCopy\n} from \"../internal\"\n\nexport function processResult(result: any, scope: ImmerScope) {\n\tscope.unfinalizedDrafts_ = scope.drafts_.length\n\tconst baseDraft = scope.drafts_![0]\n\tconst isReplaced = result !== undefined && result !== baseDraft\n\tif (!scope.immer_.useProxies_)\n\t\tgetPlugin(\"ES5\").willFinalizeES5_(scope, result, isReplaced)\n\tif (isReplaced) {\n\t\tif (baseDraft[DRAFT_STATE].modified_) {\n\t\t\trevokeScope(scope)\n\t\t\tdie(4)\n\t\t}\n\t\tif (isDraftable(result)) {\n\t\t\t// Finalize the result in case it contains (or is) a subset of the draft.\n\t\t\tresult = finalize(scope, result)\n\t\t\tif (!scope.parent_) maybeFreeze(scope, result)\n\t\t}\n\t\tif (scope.patches_) {\n\t\t\tgetPlugin(\"Patches\").generateReplacementPatches_(\n\t\t\t\tbaseDraft[DRAFT_STATE],\n\t\t\t\tresult,\n\t\t\t\tscope.patches_,\n\t\t\t\tscope.inversePatches_!\n\t\t\t)\n\t\t}\n\t} else {\n\t\t// Finalize the base draft.\n\t\tresult = finalize(scope, baseDraft, [])\n\t}\n\trevokeScope(scope)\n\tif (scope.patches_) {\n\t\tscope.patchListener_!(scope.patches_, scope.inversePatches_!)\n\t}\n\treturn result !== NOTHING ? result : undefined\n}\n\nfunction finalize(rootScope: ImmerScope, value: any, path?: PatchPath) {\n\t// Don't recurse in tho recursive data structures\n\tif (isFrozen(value)) return value\n\n\tconst state: ImmerState = value[DRAFT_STATE]\n\t// A plain object, might need freezing, might contain drafts\n\tif (!state) {\n\t\teach(\n\t\t\tvalue,\n\t\t\t(key, childValue) =>\n\t\t\t\tfinalizeProperty(rootScope, state, value, key, childValue, path),\n\t\t\ttrue // See #590, don't recurse into non-enumarable of non drafted objects\n\t\t)\n\t\treturn value\n\t}\n\t// Never finalize drafts owned by another scope.\n\tif (state.scope_ !== rootScope) return value\n\t// Unmodified draft, return the (frozen) original\n\tif (!state.modified_) {\n\t\tmaybeFreeze(rootScope, state.base_, true)\n\t\treturn state.base_\n\t}\n\t// Not finalized yet, let's do that now\n\tif (!state.finalized_) {\n\t\tstate.finalized_ = true\n\t\tstate.scope_.unfinalizedDrafts_--\n\t\tconst result =\n\t\t\t// For ES5, create a good copy from the draft first, with added keys and without deleted keys.\n\t\t\tstate.type_ === ProxyTypeES5Object || state.type_ === ProxyTypeES5Array\n\t\t\t\t? (state.copy_ = shallowCopy(state.draft_))\n\t\t\t\t: state.copy_\n\t\t// finalize all children of the copy\n\t\teach(result as any, (key, childValue) =>\n\t\t\tfinalizeProperty(rootScope, state, result, key, childValue, path)\n\t\t)\n\t\t// everything inside is frozen, we can freeze here\n\t\tmaybeFreeze(rootScope, result, false)\n\t\t// first time finalizing, let's create those patches\n\t\tif (path && rootScope.patches_) {\n\t\t\tgetPlugin(\"Patches\").generatePatches_(\n\t\t\t\tstate,\n\t\t\t\tpath,\n\t\t\t\trootScope.patches_,\n\t\t\t\trootScope.inversePatches_!\n\t\t\t)\n\t\t}\n\t}\n\treturn state.copy_\n}\n\nfunction finalizeProperty(\n\trootScope: ImmerScope,\n\tparentState: undefined | ImmerState,\n\ttargetObject: any,\n\tprop: string | number,\n\tchildValue: any,\n\trootPath?: PatchPath\n) {\n\tif (__DEV__ && childValue === targetObject) die(5)\n\tif (isDraft(childValue)) {\n\t\tconst path =\n\t\t\trootPath &&\n\t\t\tparentState &&\n\t\t\tparentState!.type_ !== ProxyTypeSet && // Set objects are atomic since they have no keys.\n\t\t\t!has((parentState as Exclude<ImmerState, SetState>).assigned_!, prop) // Skip deep patches for assigned keys.\n\t\t\t\t? rootPath!.concat(prop)\n\t\t\t\t: undefined\n\t\t// Drafts owned by `scope` are finalized here.\n\t\tconst res = finalize(rootScope, childValue, path)\n\t\tset(targetObject, prop, res)\n\t\t// Drafts from another scope must prevented to be frozen\n\t\t// if we got a draft back from finalize, we're in a nested produce and shouldn't freeze\n\t\tif (isDraft(res)) {\n\t\t\trootScope.canAutoFreeze_ = false\n\t\t} else return\n\t}\n\t// Search new objects for unfinalized drafts. Frozen objects should never contain drafts.\n\tif (isDraftable(childValue) && !Object.isFrozen(childValue)) {\n\t\tif (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {\n\t\t\t// optimization: if an object is not a draft, and we don't have to\n\t\t\t// deepfreeze everything, and we are sure that no drafts are left in the remaining object\n\t\t\t// cause we saw and finalized all drafts already; we can stop visiting the rest of the tree.\n\t\t\t// This benefits especially adding large data tree's without further processing.\n\t\t\t// See add-data.js perf test\n\t\t\treturn\n\t\t}\n\t\tfinalize(rootScope, childValue)\n\t\t// immer deep freezes plain objects, so if there is no parent state, we freeze as well\n\t\tif (!parentState || !parentState.scope_.parent_)\n\t\t\tmaybeFreeze(rootScope, childValue)\n\t}\n}\n\nfunction maybeFreeze(scope: ImmerScope, value: any, deep = false) {\n\tif (scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {\n\t\tfreeze(value, deep)\n\t}\n}\n","import {\n\teach,\n\thas,\n\tis,\n\tisDraftable,\n\tshallowCopy,\n\tlatest,\n\tImmerBaseState,\n\tImmerState,\n\tDrafted,\n\tAnyObject,\n\tAnyArray,\n\tObjectish,\n\tgetCurrentScope,\n\tDRAFT_STATE,\n\tdie,\n\tcreateProxy,\n\tProxyTypeProxyObject,\n\tProxyTypeProxyArray\n} from \"../internal\"\n\ninterface ProxyBaseState extends ImmerBaseState {\n\tassigned_: {\n\t\t[property: string]: boolean\n\t}\n\tparent_?: ImmerState\n\trevoke_(): void\n}\n\nexport interface ProxyObjectState extends ProxyBaseState {\n\ttype_: typeof ProxyTypeProxyObject\n\tbase_: any\n\tcopy_: any\n\tdraft_: Drafted<AnyObject, ProxyObjectState>\n}\n\nexport interface ProxyArrayState extends ProxyBaseState {\n\ttype_: typeof ProxyTypeProxyArray\n\tbase_: AnyArray\n\tcopy_: AnyArray | null\n\tdraft_: Drafted<AnyArray, ProxyArrayState>\n}\n\ntype ProxyState = ProxyObjectState | ProxyArrayState\n\n/**\n * Returns a new draft of the `base` object.\n *\n * The second argument is the parent draft-state (used internally).\n */\nexport function createProxyProxy<T extends Objectish>(\n\tbase: T,\n\tparent?: ImmerState\n): Drafted<T, ProxyState> {\n\tconst isArray = Array.isArray(base)\n\tconst state: ProxyState = {\n\t\ttype_: isArray ? ProxyTypeProxyArray : (ProxyTypeProxyObject as any),\n\t\t// Track which produce call this is associated with.\n\t\tscope_: parent ? parent.scope_ : getCurrentScope()!,\n\t\t// True for both shallow and deep changes.\n\t\tmodified_: false,\n\t\t// Used during finalization.\n\t\tfinalized_: false,\n\t\t// Track which properties have been assigned (true) or deleted (false).\n\t\tassigned_: {},\n\t\t// The parent draft state.\n\t\tparent_: parent,\n\t\t// The base state.\n\t\tbase_: base,\n\t\t// The base proxy.\n\t\tdraft_: null as any, // set below\n\t\t// The base copy with any updated values.\n\t\tcopy_: null,\n\t\t// Called by the `produce` function.\n\t\trevoke_: null as any,\n\t\tisManual_: false\n\t}\n\n\t// the traps must target something, a bit like the 'real' base.\n\t// but also, we need to be able to determine from the target what the relevant state is\n\t// (to avoid creating traps per instance to capture the state in closure,\n\t// and to avoid creating weird hidden properties as well)\n\t// So the trick is to use 'state' as the actual 'target'! (and make sure we intercept everything)\n\t// Note that in the case of an array, we put the state in an array to have better Reflect defaults ootb\n\tlet target: T = state as any\n\tlet traps: ProxyHandler<object | Array<any>> = objectTraps\n\tif (isArray) {\n\t\ttarget = [state] as any\n\t\ttraps = arrayTraps\n\t}\n\n\tconst {revoke, proxy} = Proxy.revocable(target, traps)\n\tstate.draft_ = proxy as any\n\tstate.revoke_ = revoke\n\treturn proxy as any\n}\n\n/**\n * Object drafts\n */\nexport const objectTraps: ProxyHandler<ProxyState> = {\n\tget(state, prop) {\n\t\tif (prop === DRAFT_STATE) return state\n\n\t\tconst source = latest(state)\n\t\tif (!has(source, prop)) {\n\t\t\t// non-existing or non-own property...\n\t\t\treturn readPropFromProto(state, source, prop)\n\t\t}\n\t\tconst value = source[prop]\n\t\tif (state.finalized_ || !isDraftable(value)) {\n\t\t\treturn value\n\t\t}\n\t\t// Check for existing draft in modified state.\n\t\t// Assigned values are never drafted. This catches any drafts we created, too.\n\t\tif (value === peek(state.base_, prop)) {\n\t\t\tprepareCopy(state)\n\t\t\treturn (state.copy_![prop as any] = createProxy(\n\t\t\t\tstate.scope_.immer_,\n\t\t\t\tvalue,\n\t\t\t\tstate\n\t\t\t))\n\t\t}\n\t\treturn value\n\t},\n\thas(state, prop) {\n\t\treturn prop in latest(state)\n\t},\n\townKeys(state) {\n\t\treturn Reflect.ownKeys(latest(state))\n\t},\n\tset(state, prop: string /* strictly not, but helps TS */, value) {\n\t\tstate.assigned_[prop] = true\n\t\tif (!state.modified_) {\n\t\t\tif (is(value, peek(latest(state), prop)) && value !== undefined)\n\t\t\t\treturn true\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t}\n\t\t// @ts-ignore\n\t\tstate.copy_![prop] = value\n\t\treturn true\n\t},\n\tdeleteProperty(state, prop: string) {\n\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\tif (peek(state.base_, prop) !== undefined || prop in state.base_) {\n\t\t\tstate.assigned_[prop] = false\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t} else {\n\t\t\t// if an originally not assigned property was deleted\n\t\t\tdelete state.assigned_[prop]\n\t\t}\n\t\t// @ts-ignore\n\t\tif (state.copy_) delete state.copy_[prop]\n\t\treturn true\n\t},\n\t// Note: We never coerce `desc.value` into an Immer draft, because we can't make\n\t// the same guarantee in ES5 mode.\n\tgetOwnPropertyDescriptor(state, prop) {\n\t\tconst owner = latest(state)\n\t\tconst desc = Reflect.getOwnPropertyDescriptor(owner, prop)\n\t\tif (!desc) return desc\n\t\treturn {\n\t\t\twritable: true,\n\t\t\tconfigurable: state.type_ !== ProxyTypeProxyArray || prop !== \"length\",\n\t\t\tenumerable: desc.enumerable,\n\t\t\tvalue: owner[prop]\n\t\t}\n\t},\n\tdefineProperty() {\n\t\tdie(11)\n\t},\n\tgetPrototypeOf(state) {\n\t\treturn Object.getPrototypeOf(state.base_)\n\t},\n\tsetPrototypeOf() {\n\t\tdie(12)\n\t}\n}\n\n/**\n * Array drafts\n */\n\nconst arrayTraps: ProxyHandler<[ProxyArrayState]> = {}\neach(objectTraps, (key, fn) => {\n\t// @ts-ignore\n\tarrayTraps[key] = function() {\n\t\targuments[0] = arguments[0][0]\n\t\treturn fn.apply(this, arguments)\n\t}\n})\narrayTraps.deleteProperty = function(state, prop) {\n\tif (__DEV__ && isNaN(parseInt(prop as any))) die(13)\n\treturn objectTraps.deleteProperty!.call(this, state[0], prop)\n}\narrayTraps.set = function(state, prop, value) {\n\tif (__DEV__ && prop !== \"length\" && isNaN(parseInt(prop as any))) die(14)\n\treturn objectTraps.set!.call(this, state[0], prop, value, state[0])\n}\n\n// Access a property without creating an Immer draft.\nfunction peek(draft: Drafted, prop: PropertyKey) {\n\tconst state = draft[DRAFT_STATE]\n\tconst source = state ? latest(state) : draft\n\treturn source[prop]\n}\n\nfunction readPropFromProto(state: ImmerState, source: any, prop: PropertyKey) {\n\t// 'in' checks proto!\n\tif (!(prop in source)) return undefined\n\tlet proto = Object.getPrototypeOf(source)\n\twhile (proto) {\n\t\tconst desc = Object.getOwnPropertyDescriptor(proto, prop)\n\t\t// This is a very special case, if the prop is a getter defined by the\n\t\t// prototype, we should invoke it with the draft as context!\n\t\tif (desc) return `value` in desc ? desc.value : desc.get?.call(state.draft_)\n\t\tproto = Object.getPrototypeOf(proto)\n\t}\n\treturn undefined\n}\n\nexport function markChanged(state: ImmerState) {\n\tif (!state.modified_) {\n\t\tstate.modified_ = true\n\t\tif (state.parent_) {\n\t\t\tmarkChanged(state.parent_)\n\t\t}\n\t}\n}\n\nexport function prepareCopy(state: {base_: any; copy_: any}) {\n\tif (!state.copy_) {\n\t\tstate.copy_ = shallowCopy(state.base_)\n\t}\n}\n","import {\n\tIProduceWithPatches,\n\tIProduce,\n\tImmerState,\n\tDrafted,\n\tisDraftable,\n\tprocessResult,\n\tPatch,\n\tObjectish,\n\tDRAFT_STATE,\n\tDraft,\n\tPatchListener,\n\tisDraft,\n\tisMap,\n\tisSet,\n\tcreateProxyProxy,\n\tgetPlugin,\n\tdie,\n\thasProxies,\n\tisMinified,\n\tenterScope,\n\trevokeScope,\n\tleaveScope,\n\tusePatchesInScope,\n\tgetCurrentScope,\n\tNOTHING,\n\tfreeze,\n\tcurrent\n} from \"../internal\"\n\ninterface ProducersFns {\n\tproduce: IProduce\n\tproduceWithPatches: IProduceWithPatches\n}\n\nexport class Immer implements ProducersFns {\n\tuseProxies_: boolean = hasProxies\n\n\tautoFreeze_: boolean = __DEV__ ? true /* istanbul ignore next */ : !isMinified\n\n\tconstructor(config?: {useProxies?: boolean; autoFreeze?: boolean}) {\n\t\tif (typeof config?.useProxies === \"boolean\")\n\t\t\tthis.setUseProxies(config!.useProxies)\n\t\tif (typeof config?.autoFreeze === \"boolean\")\n\t\t\tthis.setAutoFreeze(config!.autoFreeze)\n\t\tthis.produce = this.produce.bind(this)\n\t\tthis.produceWithPatches = this.produceWithPatches.bind(this)\n\t}\n\n\t/**\n\t * The `produce` function takes a value and a \"recipe function\" (whose\n\t * return value often depends on the base state). The recipe function is\n\t * free to mutate its first argument however it wants. All mutations are\n\t * only ever applied to a __copy__ of the base state.\n\t *\n\t * Pass only a function to create a \"curried producer\" which relieves you\n\t * from passing the recipe function every time.\n\t *\n\t * Only plain objects and arrays are made mutable. All other objects are\n\t * considered uncopyable.\n\t *\n\t * Note: This function is __bound__ to its `Immer` instance.\n\t *\n\t * @param {any} base - the initial state\n\t * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n\t * @param {Function} patchListener - optional function that will be called with all the patches produced here\n\t * @returns {any} a new state, or the initial state if nothing was modified\n\t */\n\tproduce(base: any, recipe?: any, patchListener?: any) {\n\t\t// curried invocation\n\t\tif (typeof base === \"function\" && typeof recipe !== \"function\") {\n\t\t\tconst defaultBase = recipe\n\t\t\trecipe = base\n\n\t\t\tconst self = this\n\t\t\treturn function curriedProduce(\n\t\t\t\tthis: any,\n\t\t\t\tbase = defaultBase,\n\t\t\t\t...args: any[]\n\t\t\t) {\n\t\t\t\treturn self.produce(base, (draft: Drafted) => recipe.call(this, draft, ...args)) // prettier-ignore\n\t\t\t}\n\t\t}\n\n\t\tif (typeof recipe !== \"function\") die(6)\n\t\tif (patchListener !== undefined && typeof patchListener !== \"function\")\n\t\t\tdie(7)\n\n\t\tlet result\n\n\t\t// Only plain objects, arrays, and \"immerable classes\" are drafted.\n\t\tif (isDraftable(base)) {\n\t\t\tconst scope = enterScope(this)\n\t\t\tconst proxy = createProxy(this, base, undefined)\n\t\t\tlet hasError = true\n\t\t\ttry {\n\t\t\t\tresult = recipe(proxy)\n\t\t\t\thasError = false\n\t\t\t} finally {\n\t\t\t\t// finally instead of catch + rethrow better preserves original stack\n\t\t\t\tif (hasError) revokeScope(scope)\n\t\t\t\telse leaveScope(scope)\n\t\t\t}\n\t\t\tif (typeof Promise !== \"undefined\" && result instanceof Promise) {\n\t\t\t\treturn result.then(\n\t\t\t\t\tresult => {\n\t\t\t\t\t\tusePatchesInScope(scope, patchListener)\n\t\t\t\t\t\treturn processResult(result, scope)\n\t\t\t\t\t},\n\t\t\t\t\terror => {\n\t\t\t\t\t\trevokeScope(scope)\n\t\t\t\t\t\tthrow error\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t\tusePatchesInScope(scope, patchListener)\n\t\t\treturn processResult(result, scope)\n\t\t} else if (!base || typeof base !== \"object\") {\n\t\t\tresult = recipe(base)\n\t\t\tif (result === NOTHING) return undefined\n\t\t\tif (result === undefined) result = base\n\t\t\tif (this.autoFreeze_) freeze(result, true)\n\t\t\treturn result\n\t\t} else die(21, base)\n\t}\n\n\tproduceWithPatches(arg1: any, arg2?: any, arg3?: any): any {\n\t\tif (typeof arg1 === \"function\") {\n\t\t\treturn (state: any, ...args: any[]) =>\n\t\t\t\tthis.produceWithPatches(state, (draft: any) => arg1(draft, ...args))\n\t\t}\n\n\t\tlet patches: Patch[], inversePatches: Patch[]\n\t\tconst nextState = this.produce(arg1, arg2, (p: Patch[], ip: Patch[]) => {\n\t\t\tpatches = p\n\t\t\tinversePatches = ip\n\t\t})\n\t\treturn [nextState, patches!, inversePatches!]\n\t}\n\n\tcreateDraft<T extends Objectish>(base: T): Draft<T> {\n\t\tif (!isDraftable(base)) die(8)\n\t\tif (isDraft(base)) base = current(base)\n\t\tconst scope = enterScope(this)\n\t\tconst proxy = createProxy(this, base, undefined)\n\t\tproxy[DRAFT_STATE].isManual_ = true\n\t\tleaveScope(scope)\n\t\treturn proxy as any\n\t}\n\n\tfinishDraft<D extends Draft<any>>(\n\t\tdraft: D,\n\t\tpatchListener?: PatchListener\n\t): D extends Draft<infer T> ? T : never {\n\t\tconst state: ImmerState = draft && (draft as any)[DRAFT_STATE]\n\t\tif (__DEV__) {\n\t\t\tif (!state || !state.isManual_) die(9)\n\t\t\tif (state.finalized_) die(10)\n\t\t}\n\t\tconst {scope_: scope} = state\n\t\tusePatchesInScope(scope, patchListener)\n\t\treturn processResult(undefined, scope)\n\t}\n\n\t/**\n\t * Pass true to automatically freeze all copies created by Immer.\n\t *\n\t * By default, auto-freezing is disabled in production.\n\t */\n\tsetAutoFreeze(value: boolean) {\n\t\tthis.autoFreeze_ = value\n\t}\n\n\t/**\n\t * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n\t * always faster than using ES5 proxies.\n\t *\n\t * By default, feature detection is used, so calling this is rarely necessary.\n\t */\n\tsetUseProxies(value: boolean) {\n\t\tif (value && !hasProxies) {\n\t\t\tdie(20)\n\t\t}\n\t\tthis.useProxies_ = value\n\t}\n\n\tapplyPatches(base: Objectish, patches: Patch[]) {\n\t\t// If a patch replaces the entire state, take that replacement as base\n\t\t// before applying patches\n\t\tlet i: number\n\t\tfor (i = patches.length - 1; i >= 0; i--) {\n\t\t\tconst patch = patches[i]\n\t\t\tif (patch.path.length === 0 && patch.op === \"replace\") {\n\t\t\t\tbase = patch.value\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tconst applyPatchesImpl = getPlugin(\"Patches\").applyPatches_\n\t\tif (isDraft(base)) {\n\t\t\t// N.B: never hits if some patch a replacement, patches are never drafts\n\t\t\treturn applyPatchesImpl(base, patches)\n\t\t}\n\t\t// Otherwise, produce a copy of the base state.\n\t\treturn this.produce(base, (draft: Drafted) =>\n\t\t\tapplyPatchesImpl(draft, patches.slice(i + 1))\n\t\t)\n\t}\n}\n\nexport function createProxy<T extends Objectish>(\n\timmer: Immer,\n\tvalue: T,\n\tparent?: ImmerState\n): Drafted<T, ImmerState> {\n\t// precondition: createProxy should be guarded by isDraftable, so we know we can safely draft\n\tconst draft: Drafted = isMap(value)\n\t\t? getPlugin(\"MapSet\").proxyMap_(value, parent)\n\t\t: isSet(value)\n\t\t? getPlugin(\"MapSet\").proxySet_(value, parent)\n\t\t: immer.useProxies_\n\t\t? createProxyProxy(value, parent)\n\t\t: getPlugin(\"ES5\").createES5Proxy_(value, parent)\n\n\tconst scope = parent ? parent.scope_ : getCurrentScope()\n\tscope.drafts_.push(draft)\n\treturn draft\n}\n","import {\n\tdie,\n\tisDraft,\n\tshallowCopy,\n\teach,\n\tDRAFT_STATE,\n\tget,\n\tset,\n\tImmerState,\n\tisDraftable,\n\tArchtypeMap,\n\tArchtypeSet,\n\tgetArchtype,\n\tgetPlugin\n} from \"../internal\"\n\n/** Takes a snapshot of the current state of a draft and finalizes it (but without freezing). This is a great utility to print the current state during debugging (no Proxies in the way). The output of current can also be safely leaked outside the producer. */\nexport function current<T>(value: T): T\nexport function current(value: any): any {\n\tif (!isDraft(value)) die(22, value)\n\treturn currentImpl(value)\n}\n\nfunction currentImpl(value: any): any {\n\tif (!isDraftable(value)) return value\n\tconst state: ImmerState | undefined = value[DRAFT_STATE]\n\tlet copy: any\n\tconst archType = getArchtype(value)\n\tif (state) {\n\t\tif (\n\t\t\t!state.modified_ &&\n\t\t\t(state.type_ < 4 || !getPlugin(\"ES5\").hasChanges_(state as any))\n\t\t)\n\t\t\treturn state.base_\n\t\t// Optimization: avoid generating new drafts during copying\n\t\tstate.finalized_ = true\n\t\tcopy = copyHelper(value, archType)\n\t\tstate.finalized_ = false\n\t} else {\n\t\tcopy = copyHelper(value, archType)\n\t}\n\n\teach(copy, (key, childValue) => {\n\t\tif (state && get(state.base_, key) === childValue) return // no need to copy or search in something that didn't change\n\t\tset(copy, key, currentImpl(childValue))\n\t})\n\t// In the future, we might consider freezing here, based on the current settings\n\treturn archType === ArchtypeSet ? new Set(copy) : copy\n}\n\nfunction copyHelper(value: any, archType: number): any {\n\t// creates a shallow copy, even if it is a map or set\n\tswitch (archType) {\n\t\tcase ArchtypeMap:\n\t\t\treturn new Map(value)\n\t\tcase ArchtypeSet:\n\t\t\t// Set will be cloned as array temporarily, so that we can replace individual items\n\t\t\treturn Array.from(value)\n\t}\n\treturn shallowCopy(value)\n}\n","import {\n\tIProduce,\n\tIProduceWithPatches,\n\tImmer,\n\tDraft,\n\tImmutable\n} from \"./internal\"\n\nexport {\n\tDraft,\n\tImmutable,\n\tPatch,\n\tPatchListener,\n\toriginal,\n\tcurrent,\n\tisDraft,\n\tisDraftable,\n\tNOTHING as nothing,\n\tDRAFTABLE as immerable\n} from \"./internal\"\n\nconst immer = new Immer()\n\n/**\n * The `produce` function takes a value and a \"recipe function\" (whose\n * return value often depends on the base state). The recipe function is\n * free to mutate its first argument however it wants. All mutations are\n * only ever applied to a __copy__ of the base state.\n *\n * Pass only a function to create a \"curried producer\" which relieves you\n * from passing the recipe function every time.\n *\n * Only plain objects and arrays are made mutable. All other objects are\n * considered uncopyable.\n *\n * Note: This function is __bound__ to its `Immer` instance.\n *\n * @param {any} base - the initial state\n * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n * @param {Function} patchListener - optional function that will be called with all the patches produced here\n * @returns {any} a new state, or the initial state if nothing was modified\n */\nexport const produce: IProduce = immer.produce\nexport default produce\n\n/**\n * Like `produce`, but `produceWithPatches` always returns a tuple\n * [nextState, patches, inversePatches] (instead of just the next state)\n */\nexport const produceWithPatches: IProduceWithPatches = immer.produceWithPatches.bind(\n\timmer\n)\n\n/**\n * Pass true to automatically freeze all copies created by Immer.\n *\n * By default, auto-freezing is disabled in production.\n */\nexport const setAutoFreeze = immer.setAutoFreeze.bind(immer)\n\n/**\n * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n * always faster than using ES5 proxies.\n *\n * By default, feature detection is used, so calling this is rarely necessary.\n */\nexport const setUseProxies = immer.setUseProxies.bind(immer)\n\n/**\n * Apply an array of Immer patches to the first argument.\n *\n * This function is a producer, which means copy-on-write is in effect.\n */\nexport const applyPatches = immer.applyPatches.bind(immer)\n\n/**\n * Create an Immer draft from the given base state, which may be a draft itself.\n * The draft can be modified until you finalize it with the `finishDraft` function.\n */\nexport const createDraft = immer.createDraft.bind(immer)\n\n/**\n * Finalize an Immer draft from a `createDraft` call, returning the base state\n * (if no changes were made) or a modified copy. The draft must *not* be\n * mutated afterwards.\n *\n * Pass a function as the 2nd argument to generate Immer patches based on the\n * changes that were made.\n */\nexport const finishDraft = immer.finishDraft.bind(immer)\n\n/**\n * This function is actually a no-op, but can be used to cast an immutable type\n * to an draft type and make TypeScript happy\n *\n * @param value\n */\nexport function castDraft<T>(value: T): Draft<T> {\n\treturn value as any\n}\n\n/**\n * This function is actually a no-op, but can be used to cast a mutable type\n * to an immutable type and make TypeScript happy\n * @param value\n */\nexport function castImmutable<T>(value: T): Immutable<T> {\n\treturn value as any\n}\n\nexport {Immer}\n\nexport {enableES5} from \"./plugins/es5\"\nexport {enablePatches} from \"./plugins/patches\"\nexport {enableMapSet} from \"./plugins/mapset\"\nexport {enableAllPlugins} from \"./plugins/all\"\n","// Should be no imports here!\n\n// Some things that should be evaluated before all else...\n\n// We only want to know if non-polyfilled symbols are available\nconst hasSymbol =\n\ttypeof Symbol !== \"undefined\" && typeof Symbol(\"x\") === \"symbol\"\nexport const hasMap = typeof Map !== \"undefined\"\nexport const hasSet = typeof Set !== \"undefined\"\nexport const hasProxies =\n\ttypeof Proxy !== \"undefined\" &&\n\ttypeof Proxy.revocable !== \"undefined\" &&\n\ttypeof Reflect !== \"undefined\"\n\n/* istanbul ignore next */\nfunction mini() {}\nexport const isMinified = mini.name !== \"mini\"\n\n/**\n * The sentinel value returned by producers to replace the draft with undefined.\n */\nexport const NOTHING: Nothing = hasSymbol\n\t? Symbol(\"immer-nothing\")\n\t: ({[\"immer-nothing\"]: true} as any)\n\n/**\n * To let Immer treat your class instances as plain immutable objects\n * (albeit with a custom prototype), you must define either an instance property\n * or a static property on each of your custom classes.\n *\n * Otherwise, your class instance will never be drafted, which means it won't be\n * safe to mutate in a produce callback.\n */\nexport const DRAFTABLE: unique symbol = hasSymbol\n\t? Symbol(\"immer-draftable\")\n\t: (\"__$immer_draftable\" as any)\n\nexport const DRAFT_STATE: unique symbol = hasSymbol\n\t? Symbol(\"immer-state\")\n\t: (\"__$immer_state\" as any)\n\n// Even a polyfilled Symbol might provide Symbol.iterator\nexport const iteratorSymbol: typeof Symbol.iterator =\n\t(typeof Symbol != \"undefined\" && Symbol.iterator) || (\"@@iterator\" as any)\n\n/** Use a class type for `nothing` so its type is unique */\nexport class Nothing {\n\t// This lets us do `Exclude<T, Nothing>`\n\t// @ts-ignore\n\tprivate _!: unique symbol\n}\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf3 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _VisibilityObserver = _interopRequireDefault(require(\"./VisibilityObserver\"));\n\nvar IsVisible =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  (0, _inherits2.default)(IsVisible, _React$PureComponent);\n\n  function IsVisible() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    (0, _classCallCheck2.default)(this, IsVisible);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(IsVisible)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"state\", {\n      isVisible: false\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"handleVisibilityChange\", function (_ref) {\n      var isIntersecting = _ref.isIntersecting;\n\n      if (_this.state.isVisible !== isIntersecting) {\n        _this.setState({\n          isVisible: isIntersecting\n        });\n      }\n\n      if (isIntersecting && _this.props.once) {\n        _this.unwatch();\n      }\n    });\n    return _this;\n  }\n\n  (0, _createClass2.default)(IsVisible, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.unwatch = _VisibilityObserver.default.watch(_reactDom.default.findDOMNode(this), this.handleVisibilityChange);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unwatch();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isVisible = this.state.isVisible;\n      var renderedChildren = this.props.children(isVisible);\n      return renderedChildren && _react.default.Children.only(renderedChildren);\n    }\n  }]);\n  return IsVisible;\n}(_react.default.PureComponent);\n\nvar _default = IsVisible;\nexports.default = _default;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","export default function isDocumentVisible() {\n    if (typeof document !== 'undefined' &&\n        typeof document.visibilityState !== 'undefined') {\n        return document.visibilityState !== 'hidden';\n    }\n    // always assume it's visible\n    return true;\n}\n","export default function isOnline() {\n    if (typeof navigator.onLine !== 'undefined') {\n        return navigator.onLine;\n    }\n    // always assume it's online\n    return true;\n}\n","// use WeakMap to store the object->key mapping\n// so the objects can be garbage collected.\n// WeakMap uses a hashtable under the hood, so the lookup\n// complexity is almost O(1).\nvar table = new WeakMap();\n// counter of the key\nvar counter = 0;\n// hashes an array of objects and returns a string\nexport default function hash(args) {\n    if (!args.length)\n        return '';\n    var key = 'arg';\n    for (var i = 0; i < args.length; ++i) {\n        var _hash = void 0;\n        if (args[i] === null || typeof args[i] !== 'object') {\n            // need to consider the case that args[i] is a string:\n            // args[i]        _hash\n            // \"undefined\" -> '\"undefined\"'\n            // undefined   -> 'undefined'\n            // 123         -> '123'\n            // null        -> 'null'\n            // \"null\"      -> '\"null\"'\n            if (typeof args[i] === 'string') {\n                _hash = '\"' + args[i] + '\"';\n            }\n            else {\n                _hash = String(args[i]);\n            }\n        }\n        else {\n            if (!table.has(args[i])) {\n                _hash = counter;\n                table.set(args[i], counter++);\n            }\n            else {\n                _hash = table.get(args[i]);\n            }\n        }\n        key += '@' + _hash;\n    }\n    return key;\n}\n","import { mutate } from './use-swr';\nimport hash from './libs/hash';\nvar Cache = /** @class */ (function () {\n    function Cache(initialData) {\n        if (initialData === void 0) { initialData = {}; }\n        this.__cache = new Map(Object.entries(initialData));\n        this.__listeners = [];\n    }\n    Cache.prototype.get = function (key) {\n        var _key = this.serializeKey(key)[0];\n        return this.__cache.get(_key);\n    };\n    Cache.prototype.set = function (key, value, shouldNotify) {\n        if (shouldNotify === void 0) { shouldNotify = true; }\n        var _key = this.serializeKey(key)[0];\n        this.__cache.set(_key, value);\n        if (shouldNotify)\n            mutate(key, value, false);\n        this.notify();\n    };\n    Cache.prototype.keys = function () {\n        return Array.from(this.__cache.keys());\n    };\n    Cache.prototype.has = function (key) {\n        var _key = this.serializeKey(key)[0];\n        return this.__cache.has(_key);\n    };\n    Cache.prototype.clear = function (shouldNotify) {\n        if (shouldNotify === void 0) { shouldNotify = true; }\n        if (shouldNotify)\n            this.__cache.forEach(function (key) { return mutate(key, null, false); });\n        this.__cache.clear();\n        this.notify();\n    };\n    Cache.prototype.delete = function (key, shouldNotify) {\n        if (shouldNotify === void 0) { shouldNotify = true; }\n        var _key = this.serializeKey(key)[0];\n        if (shouldNotify)\n            mutate(key, null, false);\n        this.__cache.delete(_key);\n        this.notify();\n    };\n    // TODO: introduce namespace for the cache\n    Cache.prototype.serializeKey = function (key) {\n        var args = null;\n        if (typeof key === 'function') {\n            try {\n                key = key();\n            }\n            catch (err) {\n                // dependencies not ready\n                key = '';\n            }\n        }\n        if (Array.isArray(key)) {\n            // args array\n            args = key;\n            key = hash(key);\n        }\n        else {\n            // convert null to ''\n            key = String(key || '');\n        }\n        var errorKey = key ? 'err@' + key : '';\n        return [key, args, errorKey];\n    };\n    Cache.prototype.subscribe = function (listener) {\n        var _this = this;\n        if (typeof listener !== 'function') {\n            throw new Error('Expected the listener to be a function.');\n        }\n        var isSubscribed = true;\n        this.__listeners.push(listener);\n        return function () {\n            if (!isSubscribed)\n                return;\n            isSubscribed = false;\n            var index = _this.__listeners.indexOf(listener);\n            if (index > -1) {\n                _this.__listeners[index] = _this.__listeners[_this.__listeners.length - 1];\n                _this.__listeners.length--;\n            }\n        };\n    };\n    // Notify Cache subscribers about a change in the cache\n    Cache.prototype.notify = function () {\n        for (var _i = 0, _a = this.__listeners; _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener();\n        }\n    };\n    return Cache;\n}());\nexport default Cache;\n","import deepEqual from 'fast-deep-equal';\nimport isDocumentVisible from './libs/is-document-visible';\nimport isOnline from './libs/is-online';\nimport Cache from './cache';\n// cache\nvar cache = new Cache();\n// state managers\nvar CONCURRENT_PROMISES = {};\nvar CONCURRENT_PROMISES_TS = {};\nvar FOCUS_REVALIDATORS = {};\nvar CACHE_REVALIDATORS = {};\nvar MUTATION_TS = {};\n// error retry\nfunction onErrorRetry(_, __, config, revalidate, opts) {\n    if (!isDocumentVisible()) {\n        // if it's hidden, stop\n        // it will auto revalidate when focus\n        return;\n    }\n    if (config.errorRetryCount && opts.retryCount > config.errorRetryCount) {\n        return;\n    }\n    // exponential backoff\n    var count = Math.min(opts.retryCount || 0, 8);\n    var timeout = ~~((Math.random() + 0.5) * (1 << count)) * config.errorRetryInterval;\n    setTimeout(revalidate, timeout, opts);\n}\n// client side: need to adjust the config\n// based on the browser status\n// slow connection (<= 70Kbps)\nvar slowConnection = typeof window !== 'undefined' &&\n    navigator['connection'] &&\n    ['slow-2g', '2g'].indexOf(navigator['connection'].effectiveType) !== -1;\n// config\nvar defaultConfig = {\n    // events\n    onLoadingSlow: function () { },\n    onSuccess: function () { },\n    onError: function () { },\n    onErrorRetry: onErrorRetry,\n    errorRetryInterval: (slowConnection ? 10 : 5) * 1000,\n    focusThrottleInterval: 5 * 1000,\n    dedupingInterval: 2 * 1000,\n    loadingTimeout: (slowConnection ? 5 : 3) * 1000,\n    refreshInterval: 0,\n    revalidateOnFocus: true,\n    revalidateOnReconnect: true,\n    refreshWhenHidden: false,\n    refreshWhenOffline: false,\n    shouldRetryOnError: true,\n    suspense: false,\n    compare: deepEqual\n};\n// Focus revalidate\nvar eventsBinded = false;\nif (typeof window !== 'undefined' && window.addEventListener && !eventsBinded) {\n    var revalidate = function () {\n        if (!isDocumentVisible() || !isOnline())\n            return;\n        for (var key in FOCUS_REVALIDATORS) {\n            if (FOCUS_REVALIDATORS[key][0])\n                FOCUS_REVALIDATORS[key][0]();\n        }\n    };\n    window.addEventListener('visibilitychange', revalidate, false);\n    window.addEventListener('focus', revalidate, false);\n    // only bind the events once\n    eventsBinded = true;\n}\nexport { CONCURRENT_PROMISES, CONCURRENT_PROMISES_TS, FOCUS_REVALIDATORS, CACHE_REVALIDATORS, MUTATION_TS, cache };\nexport default defaultConfig;\n","export default function throttle(fn, interval) {\n    var pending = false;\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (pending)\n            return;\n        pending = true;\n        fn.apply(void 0, args);\n        setTimeout(function () { return (pending = false); }, interval);\n    };\n}\n","import { createContext } from 'react';\nvar SWRConfigContext = createContext({});\nSWRConfigContext.displayName = 'SWRConfigContext';\nexport default SWRConfigContext;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { useCallback, useContext, useEffect, useLayoutEffect, useState, useRef, useMemo } from 'react';\nimport defaultConfig, { CACHE_REVALIDATORS, CONCURRENT_PROMISES, CONCURRENT_PROMISES_TS, FOCUS_REVALIDATORS, MUTATION_TS, cache } from './config';\nimport isDocumentVisible from './libs/is-document-visible';\nimport isOnline from './libs/is-online';\nimport throttle from './libs/throttle';\nimport SWRConfigContext from './swr-config-context';\nvar IS_SERVER = typeof window === 'undefined';\n// React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser.\nvar useIsomorphicLayoutEffect = IS_SERVER ? useEffect : useLayoutEffect;\nvar trigger = function (_key, shouldRevalidate) {\n    if (shouldRevalidate === void 0) { shouldRevalidate = true; }\n    // we are ignoring the second argument which correspond to the arguments\n    // the fetcher will receive when key is an array\n    var _a = cache.serializeKey(_key), key = _a[0], keyErr = _a[2];\n    if (!key)\n        return Promise.resolve();\n    var updaters = CACHE_REVALIDATORS[key];\n    if (key && updaters) {\n        var currentData = cache.get(key);\n        var currentError = cache.get(keyErr);\n        var promises = [];\n        for (var i = 0; i < updaters.length; ++i) {\n            promises.push(updaters[i](shouldRevalidate, currentData, currentError, i > 0));\n        }\n        // return new updated value\n        return Promise.all(promises).then(function () { return cache.get(key); });\n    }\n    return Promise.resolve(cache.get(key));\n};\nvar broadcastState = function (key, data, error) {\n    var updaters = CACHE_REVALIDATORS[key];\n    if (key && updaters) {\n        for (var i = 0; i < updaters.length; ++i) {\n            updaters[i](false, data, error);\n        }\n    }\n};\nvar mutate = function (_key, _data, shouldRevalidate) {\n    if (shouldRevalidate === void 0) { shouldRevalidate = true; }\n    return __awaiter(void 0, void 0, void 0, function () {\n        var key, data, error, beforeMutationTs, beforeConcurrentPromisesTs, err_1, err_2, updaters, promises, i;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    key = cache.serializeKey(_key)[0];\n                    if (!key)\n                        return [2 /*return*/];\n                    // if there is no new data, call revalidate against the key\n                    if (typeof _data === 'undefined')\n                        return [2 /*return*/, trigger(_key, shouldRevalidate)\n                            // update timestamp\n                        ];\n                    // update timestamp\n                    MUTATION_TS[key] = Date.now() - 1;\n                    beforeMutationTs = MUTATION_TS[key];\n                    beforeConcurrentPromisesTs = CONCURRENT_PROMISES_TS[key];\n                    if (!(_data && typeof _data === 'function')) return [3 /*break*/, 5];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, _data(cache.get(key))];\n                case 2:\n                    data = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    err_1 = _a.sent();\n                    error = err_1;\n                    return [3 /*break*/, 4];\n                case 4: return [3 /*break*/, 11];\n                case 5:\n                    if (!(_data && typeof _data.then === 'function')) return [3 /*break*/, 10];\n                    _a.label = 6;\n                case 6:\n                    _a.trys.push([6, 8, , 9]);\n                    return [4 /*yield*/, _data];\n                case 7:\n                    data = _a.sent();\n                    return [3 /*break*/, 9];\n                case 8:\n                    err_2 = _a.sent();\n                    error = err_2;\n                    return [3 /*break*/, 9];\n                case 9: return [3 /*break*/, 11];\n                case 10:\n                    data = _data;\n                    _a.label = 11;\n                case 11:\n                    // Check if other mutations have occurred since we've started awaiting, if so then do not persist this change\n                    if (beforeMutationTs !== MUTATION_TS[key] ||\n                        beforeConcurrentPromisesTs !== CONCURRENT_PROMISES_TS[key]) {\n                        if (error)\n                            throw error;\n                        return [2 /*return*/, data];\n                    }\n                    if (typeof data !== 'undefined') {\n                        // update cached data, avoid notifying from the cache\n                        cache.set(key, data, false);\n                    }\n                    updaters = CACHE_REVALIDATORS[key];\n                    if (updaters) {\n                        promises = [];\n                        for (i = 0; i < updaters.length; ++i) {\n                            promises.push(updaters[i](!!shouldRevalidate, data, error, i > 0));\n                        }\n                        // return new updated value\n                        return [2 /*return*/, Promise.all(promises).then(function () { return cache.get(key); })];\n                    }\n                    // throw error or return data to be used by caller of mutate\n                    if (error)\n                        throw error;\n                    return [2 /*return*/, data];\n            }\n        });\n    });\n};\nfunction useSWR() {\n    var _this = this;\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var _key, fn, config = {};\n    if (args.length >= 1) {\n        _key = args[0];\n    }\n    if (args.length > 2) {\n        fn = args[1];\n        config = args[2];\n    }\n    else {\n        if (typeof args[1] === 'function') {\n            fn = args[1];\n        }\n        else if (typeof args[1] === 'object') {\n            config = args[1];\n        }\n    }\n    // we assume `key` as the identifier of the request\n    // `key` can change but `fn` shouldn't\n    // (because `revalidate` only depends on `key`)\n    // `keyErr` is the cache key for error objects\n    var _a = cache.serializeKey(_key), key = _a[0], fnArgs = _a[1], keyErr = _a[2];\n    config = Object.assign({}, defaultConfig, useContext(SWRConfigContext), config);\n    if (typeof fn === 'undefined') {\n        // use a global fetcher\n        fn = config.fetcher;\n    }\n    var initialData = cache.get(key) || config.initialData;\n    var initialError = cache.get(keyErr);\n    // if a state is accessed (data, error or isValidating),\n    // we add the state to dependencies so if the state is\n    // updated in the future, we can trigger a rerender\n    var stateDependencies = useRef({\n        data: false,\n        error: false,\n        isValidating: false\n    });\n    var stateRef = useRef({\n        data: initialData,\n        error: initialError,\n        isValidating: false\n    });\n    var rerender = useState(null)[1];\n    var dispatch = useCallback(function (payload) {\n        var shouldUpdateState = false;\n        for (var k in payload) {\n            stateRef.current[k] = payload[k];\n            if (stateDependencies.current[k]) {\n                shouldUpdateState = true;\n            }\n        }\n        if (shouldUpdateState || config.suspense) {\n            rerender({});\n        }\n    }, []);\n    // error ref inside revalidate (is last request errored?)\n    var unmountedRef = useRef(false);\n    var keyRef = useRef(key);\n    // do unmount check for callbacks\n    var eventsRef = useRef({\n        emit: function (event) {\n            var params = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                params[_i - 1] = arguments[_i];\n            }\n            if (unmountedRef.current)\n                return;\n            config[event].apply(config, params);\n        }\n    });\n    var boundMutate = useCallback(function (data, shouldRevalidate) {\n        return mutate(key, data, shouldRevalidate);\n    }, [key]);\n    // start a revalidation\n    var revalidate = useCallback(function (revalidateOpts) {\n        if (revalidateOpts === void 0) { revalidateOpts = {}; }\n        return __awaiter(_this, void 0, void 0, function () {\n            var loading, shouldDeduping, newData, startAt, newState, err_3, retryCount;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!key || !fn)\n                            return [2 /*return*/, false];\n                        if (unmountedRef.current)\n                            return [2 /*return*/, false];\n                        revalidateOpts = Object.assign({ dedupe: false }, revalidateOpts);\n                        loading = true;\n                        shouldDeduping = typeof CONCURRENT_PROMISES[key] !== 'undefined' && revalidateOpts.dedupe;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 6, , 7]);\n                        dispatch({\n                            isValidating: true\n                        });\n                        newData = void 0;\n                        startAt = void 0;\n                        if (!shouldDeduping) return [3 /*break*/, 3];\n                        // there's already an ongoing request,\n                        // this one needs to be deduplicated.\n                        startAt = CONCURRENT_PROMISES_TS[key];\n                        return [4 /*yield*/, CONCURRENT_PROMISES[key]];\n                    case 2:\n                        newData = _a.sent();\n                        return [3 /*break*/, 5];\n                    case 3:\n                        // if not deduping the request (hard revalidate) but\n                        // there're other ongoing request(s) at the same time,\n                        // we need to ignore the other result(s) to avoid\n                        // possible race conditions:\n                        // req1------------------>res1\n                        //      req2-------->res2\n                        // in that case, the second response should not be overridden\n                        // by the first one.\n                        if (CONCURRENT_PROMISES[key]) {\n                            // we can mark it as a mutation to ignore\n                            // all requests which are fired before this one\n                            MUTATION_TS[key] = Date.now() - 1;\n                        }\n                        // if no cache being rendered currently (it shows a blank page),\n                        // we trigger the loading slow event.\n                        if (config.loadingTimeout && !cache.get(key)) {\n                            setTimeout(function () {\n                                if (loading)\n                                    eventsRef.current.emit('onLoadingSlow', key, config);\n                            }, config.loadingTimeout);\n                        }\n                        if (fnArgs !== null) {\n                            CONCURRENT_PROMISES[key] = fn.apply(void 0, fnArgs);\n                        }\n                        else {\n                            CONCURRENT_PROMISES[key] = fn(key);\n                        }\n                        CONCURRENT_PROMISES_TS[key] = startAt = Date.now();\n                        return [4 /*yield*/, CONCURRENT_PROMISES[key]];\n                    case 4:\n                        newData = _a.sent();\n                        setTimeout(function () {\n                            delete CONCURRENT_PROMISES[key];\n                            delete CONCURRENT_PROMISES_TS[key];\n                        }, config.dedupingInterval);\n                        // trigger the success event,\n                        // only do this for the original request.\n                        eventsRef.current.emit('onSuccess', newData, key, config);\n                        _a.label = 5;\n                    case 5:\n                        // if the revalidation happened earlier than the local mutation,\n                        // we have to ignore the result because it could override.\n                        // meanwhile, a new revalidation should be triggered by the mutation.\n                        if (MUTATION_TS[key] && startAt <= MUTATION_TS[key]) {\n                            dispatch({ isValidating: false });\n                            return [2 /*return*/, false];\n                        }\n                        cache.set(key, newData, false);\n                        cache.set(keyErr, undefined, false);\n                        newState = {\n                            isValidating: false\n                        };\n                        if (typeof stateRef.current.error !== 'undefined') {\n                            // we don't have an error\n                            newState.error = undefined;\n                        }\n                        if (!config.compare(stateRef.current.data, newData)) {\n                            // deep compare to avoid extra re-render\n                            // data changed\n                            newState.data = newData;\n                        }\n                        // merge the new state\n                        dispatch(newState);\n                        if (!shouldDeduping) {\n                            // also update other hooks\n                            broadcastState(key, newData, undefined);\n                        }\n                        return [3 /*break*/, 7];\n                    case 6:\n                        err_3 = _a.sent();\n                        delete CONCURRENT_PROMISES[key];\n                        delete CONCURRENT_PROMISES_TS[key];\n                        cache.set(keyErr, err_3, false);\n                        // get a new error\n                        // don't use deep equal for errors\n                        if (stateRef.current.error !== err_3) {\n                            // we keep the stale data\n                            dispatch({\n                                isValidating: false,\n                                error: err_3\n                            });\n                            if (!shouldDeduping) {\n                                // also broadcast to update other hooks\n                                broadcastState(key, undefined, err_3);\n                            }\n                        }\n                        // events and retry\n                        eventsRef.current.emit('onError', err_3, key, config);\n                        if (config.shouldRetryOnError) {\n                            retryCount = (revalidateOpts.retryCount || 0) + 1;\n                            eventsRef.current.emit('onErrorRetry', err_3, key, config, revalidate, Object.assign({ dedupe: true }, revalidateOpts, { retryCount: retryCount }));\n                        }\n                        return [3 /*break*/, 7];\n                    case 7:\n                        loading = false;\n                        return [2 /*return*/, true];\n                }\n            });\n        });\n    }, [key]);\n    // mounted (client side rendering)\n    useIsomorphicLayoutEffect(function () {\n        if (!key)\n            return undefined;\n        // after `key` updates, we need to mark it as mounted\n        unmountedRef.current = false;\n        // after the component is mounted (hydrated),\n        // we need to update the data from the cache\n        // and trigger a revalidation\n        var currentHookData = stateRef.current.data;\n        var latestKeyedData = cache.get(key) || config.initialData;\n        // update the state if the key changed (not the inital render) or cache updated\n        if (keyRef.current !== key ||\n            !config.compare(currentHookData, latestKeyedData)) {\n            dispatch({ data: latestKeyedData });\n            keyRef.current = key;\n        }\n        // revalidate with deduping\n        var softRevalidate = function () { return revalidate({ dedupe: true }); };\n        // trigger a revalidation\n        if (config.revalidateOnMount ||\n            (!config.initialData && config.revalidateOnMount === undefined)) {\n            if (typeof latestKeyedData !== 'undefined' &&\n                !IS_SERVER &&\n                window['requestIdleCallback']) {\n                // delay revalidate if there's cache\n                // to not block the rendering\n                window['requestIdleCallback'](softRevalidate);\n            }\n            else {\n                softRevalidate();\n            }\n        }\n        // whenever the window gets focused, revalidate\n        var onFocus;\n        if (config.revalidateOnFocus) {\n            // throttle: avoid being called twice from both listeners\n            // and tabs being switched quickly\n            onFocus = throttle(softRevalidate, config.focusThrottleInterval);\n            if (!FOCUS_REVALIDATORS[key]) {\n                FOCUS_REVALIDATORS[key] = [onFocus];\n            }\n            else {\n                FOCUS_REVALIDATORS[key].push(onFocus);\n            }\n        }\n        // register global cache update listener\n        var onUpdate = function (shouldRevalidate, updatedData, updatedError, dedupe) {\n            if (shouldRevalidate === void 0) { shouldRevalidate = true; }\n            if (dedupe === void 0) { dedupe = true; }\n            // update hook state\n            var newState = {};\n            var needUpdate = false;\n            if (typeof updatedData !== 'undefined' &&\n                !config.compare(stateRef.current.data, updatedData)) {\n                newState.data = updatedData;\n                needUpdate = true;\n            }\n            // always update error\n            // because it can be `undefined`\n            if (stateRef.current.error !== updatedError) {\n                newState.error = updatedError;\n                needUpdate = true;\n            }\n            if (needUpdate) {\n                dispatch(newState);\n            }\n            if (shouldRevalidate) {\n                if (dedupe) {\n                    return softRevalidate();\n                }\n                else {\n                    return revalidate();\n                }\n            }\n            return false;\n        };\n        // add updater to listeners\n        if (!CACHE_REVALIDATORS[key]) {\n            CACHE_REVALIDATORS[key] = [onUpdate];\n        }\n        else {\n            CACHE_REVALIDATORS[key].push(onUpdate);\n        }\n        // set up reconnecting when the browser regains network connection\n        var reconnect = null;\n        if (!IS_SERVER && window.addEventListener && config.revalidateOnReconnect) {\n            window.addEventListener('online', (reconnect = softRevalidate));\n        }\n        return function () {\n            // cleanup\n            dispatch = function () { return null; };\n            // mark it as unmounted\n            unmountedRef.current = true;\n            if (onFocus && FOCUS_REVALIDATORS[key]) {\n                var revalidators = FOCUS_REVALIDATORS[key];\n                var index = revalidators.indexOf(onFocus);\n                if (index >= 0) {\n                    // 10x faster than splice\n                    // https://jsperf.com/array-remove-by-index\n                    revalidators[index] = revalidators[revalidators.length - 1];\n                    revalidators.pop();\n                }\n            }\n            if (CACHE_REVALIDATORS[key]) {\n                var revalidators = CACHE_REVALIDATORS[key];\n                var index = revalidators.indexOf(onUpdate);\n                if (index >= 0) {\n                    revalidators[index] = revalidators[revalidators.length - 1];\n                    revalidators.pop();\n                }\n            }\n            if (!IS_SERVER && window.removeEventListener && reconnect !== null) {\n                window.removeEventListener('online', reconnect);\n            }\n        };\n    }, [key, revalidate]);\n    // set up polling\n    useIsomorphicLayoutEffect(function () {\n        var timer = null;\n        var tick = function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(!stateRef.current.error &&\n                            (config.refreshWhenHidden || isDocumentVisible()) &&\n                            (config.refreshWhenOffline || isOnline()))) return [3 /*break*/, 2];\n                        // only revalidate when the page is visible\n                        // if API request errored, we stop polling in this round\n                        // and let the error retry function handle it\n                        return [4 /*yield*/, revalidate({ dedupe: true })];\n                    case 1:\n                        // only revalidate when the page is visible\n                        // if API request errored, we stop polling in this round\n                        // and let the error retry function handle it\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        if (config.refreshInterval) {\n                            timer = setTimeout(tick, config.refreshInterval);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        if (config.refreshInterval) {\n            timer = setTimeout(tick, config.refreshInterval);\n        }\n        return function () {\n            if (timer)\n                clearTimeout(timer);\n        };\n    }, [\n        config.refreshInterval,\n        config.refreshWhenHidden,\n        config.refreshWhenOffline,\n        revalidate\n    ]);\n    // suspense\n    if (config.suspense) {\n        // in suspense mode, we can't return empty state\n        // (it should be suspended)\n        // try to get data and error from cache\n        var latestData = cache.get(key) || initialData;\n        var latestError = cache.get(keyErr) || initialError;\n        if (typeof latestData === 'undefined' &&\n            typeof latestError === 'undefined') {\n            // need to start the request if it hasn't\n            if (!CONCURRENT_PROMISES[key]) {\n                // trigger revalidate immediately\n                // to get the promise\n                revalidate();\n            }\n            if (CONCURRENT_PROMISES[key] &&\n                typeof CONCURRENT_PROMISES[key].then === 'function') {\n                // if it is a promise\n                throw CONCURRENT_PROMISES[key];\n            }\n            // it's a value, return it directly (override)\n            latestData = CONCURRENT_PROMISES[key];\n        }\n        if (typeof latestData === 'undefined' && latestError) {\n            // in suspense mode, throw error if there's no content\n            throw latestError;\n        }\n        // return the latest data / error from cache\n        // in case `key` has changed\n        return {\n            error: latestError,\n            data: latestData,\n            revalidate: revalidate,\n            mutate: boundMutate,\n            isValidating: stateRef.current.isValidating\n        };\n    }\n    // define returned state\n    // can be memorized since the state is a ref\n    return useMemo(function () {\n        var state = { revalidate: revalidate, mutate: boundMutate };\n        Object.defineProperties(state, {\n            error: {\n                // `key` might be changed in the upcoming hook re-render,\n                // but the previous state will stay\n                // so we need to match the latest key and data (fallback to `initialData`)\n                get: function () {\n                    stateDependencies.current.error = true;\n                    return keyRef.current === key ? stateRef.current.error : initialError;\n                },\n                enumerable: true\n            },\n            data: {\n                get: function () {\n                    stateDependencies.current.data = true;\n                    return keyRef.current === key ? stateRef.current.data : initialData;\n                },\n                enumerable: true\n            },\n            isValidating: {\n                get: function () {\n                    stateDependencies.current.isValidating = true;\n                    return stateRef.current.isValidating;\n                },\n                enumerable: true\n            }\n        });\n        return state;\n    }, [revalidate]);\n}\nvar SWRConfig = SWRConfigContext.Provider;\nexport { trigger, mutate, SWRConfig };\nexport default useSWR;\n","var __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport React, { useCallback, useMemo, useState, useRef } from 'react';\nimport { cache } from './config';\n/*\nThe idea\n\nA \"Page\" component renders the content of 1 API request, it accepts an offset (in this example it's from),\nuses a SWR hook (useSWR(API + '?limit=' + limit + '&from=' + from)) and returns items (Projects).\n\nThe UI:\n      +------------------------------------------+\n      |   Projects                               |\n+------------------------------------------------------+\n|     |   +----------------+                     |     |\n|     |                                          |     |\n|     |   +------------+                         |     |\n|     |                                          |     +--> 1 Page\n|     |   +-----------------+                    |     |\n|     |                                          |     |  /projects/list?limit=4\n|     |   +---------+                            |     |\n+------------------------------------------------------+\n      |                                          |\n      |   +------------+                         |     +  /projects/list?limit=4&from=123\n      |                                          |     |\n      |   +----------------+                     |     |\n      |                                          |     |\n      |   +---------+                            |     |\n      |                                          |     |\n      |   +--------------+                       |     +\n      |                                          |\n      |   +-------------------+                  |     +  /projects/list?limit=4&from=456\n      |                                          |     |\n      |   +------------+                         |     |\n      |                                          |     |\n      |   +----------------+                     |     |\n      |                                          |     |\n      |                                          |     +\n\nThe API\n// (inside `render`)\n\nfunction App () {\n  const {\n    pages,    // an array of each page component\n    pageSWRs, // an array of SWRs of each page\n    isLoadingMore,\n    isReachingEnd,\n    isEmpty,\n    loadMore\n  } = useSWRPages(\n    'project-page', // key of this page\n\n    // ======== the actual Page component!\n    ({ offset, withSWR }) => {\n      // required: use `withSWR` to wrap your main SWR (source of your pagination API)\n      const { data } = withSWR(\n        useSWR(API + '?limit=10&from=' + offset) // request projects with offset\n      )\n      if (!data) return <Placeholder>\n      return data.projects.map(project => <Card project={project} team={team}>)\n    },\n    // ========\n\n    // a function accepts a SWR's `data`, and returns the offset of the next page (or null)\n    data => data && data.length >= 10 ? data[data.length - 1].createdAt : null,\n\n    // (optional) outside deps of your Page component. in this case it's empty\n    []\n  )\n\n  // ...\n\n  if (isEmpty) return <EmptyProjectsPage/>\n\n  return <div>\n    {pages}\n    {isReachingEnd\n      ? null\n      : <button loading={isLoadingMore} onClick={loadMore}>Load More</button>}\n  </div>\n}\n*/\nvar pageCacheMap = new Map();\nexport function useSWRPages(pageKey, pageFn, SWRToOffset, deps) {\n    if (deps === void 0) { deps = []; }\n    var pageCountKey = \"_swr_page_count_\" + pageKey;\n    var pageOffsetKey = \"_swr_page_offset_\" + pageKey;\n    var _a = useState(cache.get(pageCountKey) || 1), pageCount = _a[0], setPageCount = _a[1];\n    var _b = useState(cache.get(pageOffsetKey) || [null]), pageOffsets = _b[0], setPageOffsets = _b[1];\n    var _c = useState([]), pageSWRs = _c[0], setPageSWRs = _c[1];\n    var pageFnRef = useRef(pageFn);\n    var emptyPageRef = useRef(false);\n    // Page component (wraps `pageFn`)\n    // for performance reason we need to memorize it\n    var Page = useCallback(function (props) {\n        // render the page component\n        var dataList = pageFnRef.current(props);\n        // if dataList is [], we can assume this page is empty\n        // TODO: this API is not stable\n        if (dataList && !dataList.length) {\n            emptyPageRef.current = true;\n        }\n        else {\n            emptyPageRef.current = false;\n        }\n        return dataList;\n    }, []);\n    // Doesn't have a next page\n    var isReachingEnd = pageOffsets[pageCount] === null;\n    var isLoadingMore = pageCount === pageOffsets.length;\n    var isEmpty = isReachingEnd && pageCount === 1 && emptyPageRef.current;\n    var loadMore = useCallback(function () {\n        if (isLoadingMore || isReachingEnd)\n            return;\n        setPageCount(function (c) {\n            cache.set(pageCountKey, c + 1);\n            return c + 1;\n        });\n    }, [isLoadingMore || isReachingEnd]);\n    var _pageFn = useCallback(pageFn, deps);\n    pageFnRef.current = _pageFn;\n    var pages = useMemo(function () {\n        var getWithSWR = function (id) { return function (swr) {\n            if (!pageSWRs[id] ||\n                pageSWRs[id].data !== swr.data ||\n                pageSWRs[id].error !== swr.error ||\n                pageSWRs[id].revalidate !== swr.revalidate) {\n                // hoist side effects: setPageSWRs and setPageOffsets -- https://reactjs.org/blog/2020/02/26/react-v16.13.0.html#warnings-for-some-updates-during-render\n                setTimeout(function () {\n                    setPageSWRs(function (swrs) {\n                        var _swrs = __spreadArrays(swrs);\n                        _swrs[id] = {\n                            data: swr.data,\n                            error: swr.error,\n                            revalidate: swr.revalidate,\n                            isValidating: swr.isValidating,\n                            mutate: swr.mutate\n                        };\n                        return _swrs;\n                    });\n                    if (typeof swr.data !== 'undefined') {\n                        // set next page's offset\n                        var newPageOffset_1 = SWRToOffset(swr, id);\n                        if (pageOffsets[id + 1] !== newPageOffset_1) {\n                            setPageOffsets(function (arr) {\n                                var _arr = __spreadArrays(arr);\n                                _arr[id + 1] = newPageOffset_1;\n                                cache.set(pageOffsetKey, _arr);\n                                return _arr;\n                            });\n                        }\n                    }\n                });\n            }\n            return swr;\n        }; };\n        // render each page\n        var p = [];\n        if (!pageCacheMap.has(pageKey)) {\n            pageCacheMap.set(pageKey, []);\n        }\n        var pageCache = pageCacheMap.get(pageKey);\n        for (var i = 0; i < pageCount; ++i) {\n            if (!pageCache[i] ||\n                pageCache[i].offset !== pageOffsets[i] ||\n                pageCache[i].pageFn !== _pageFn) {\n                // when props change or at init\n                // render the page and cache it\n                pageCache[i] = {\n                    component: (React.createElement(Page, { key: \"page-\" + pageOffsets[i] + \"-\" + i, offset: pageOffsets[i], withSWR: getWithSWR(i) })),\n                    pageFn: _pageFn,\n                    offset: pageOffsets[i]\n                };\n            }\n            p.push(pageCache[i].component);\n        }\n        return p;\n    }, [_pageFn, pageCount, pageSWRs, pageOffsets, pageKey]);\n    return {\n        pages: pages,\n        pageCount: pageCount,\n        pageSWRs: pageSWRs,\n        isLoadingMore: isLoadingMore,\n        isReachingEnd: isReachingEnd,\n        isEmpty: isEmpty,\n        loadMore: loadMore\n    };\n}\n","export * from './use-swr';\nimport { default as useSWR } from './use-swr';\nexport { useSWRPages } from './use-swr-pages';\nexport { cache } from './config';\nexport default useSWR;\n"],"sourceRoot":""}