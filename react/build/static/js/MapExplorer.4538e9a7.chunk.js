/*! For license information please see MapExplorer.4538e9a7.chunk.js.LICENSE */
(this["webpackJsonpvisualizing-commuter-data"]=this["webpackJsonpvisualizing-commuter-data"]||[]).push([[5],{155:function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var r,o,n;if(Array.isArray(t)){if((r=t.length)!=a.length)return!1;for(o=r;0!==o--;)if(!e(t[o],a[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((r=(n=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(o=r;0!==o--;)if(!Object.prototype.hasOwnProperty.call(a,n[o]))return!1;for(o=r;0!==o--;){var c=n[o];if(!e(t[c],a[c]))return!1}return!0}return t!==t&&a!==a}},156:function(e,t,a){},157:function(e,t,a){e.exports=a.p+"static/media/help_white.ecb08412.svg"},229:function(e,t,a){"use strict";a.r(t);var r=a(55),o=a(13),n=a(5),c=a.n(n),i=function(){return(i=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var s=function(e){var t=e.animate,a=e.backgroundColor,r=e.backgroundOpacity,o=e.baseUrl,c=e.children,s=e.foregroundColor,u=e.foregroundOpacity,l=e.gradientRatio,m=e.uniqueKey,d=e.interval,f=e.rtl,b=e.speed,p=e.style,h=e.title,g=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(a[r[o]]=e[r[o]])}return a}(e,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),v=m||Math.random().toString(36).substring(6),_=v+"-diff",y=v+"-animated-diff",O=v+"-aria",E=f?{transform:"scaleX(-1)"}:null,j="0; "+d+"; 1",N=b+"s";return Object(n.createElement)("svg",i({"aria-labelledby":O,role:"img",style:i(i({},p),E)},g),h?Object(n.createElement)("title",{id:O},h):null,Object(n.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+o+"#"+_+")",style:{fill:"url("+o+"#"+y+")"}}),Object(n.createElement)("defs",{role:"presentation"},Object(n.createElement)("clipPath",{id:_},c),Object(n.createElement)("linearGradient",{id:y},Object(n.createElement)("stop",{offset:"0%",stopColor:a,stopOpacity:r},t&&Object(n.createElement)("animate",{attributeName:"offset",values:-l+"; "+-l+"; 1",keyTimes:j,dur:N,repeatCount:"indefinite"})),Object(n.createElement)("stop",{offset:"50%",stopColor:s,stopOpacity:u},t&&Object(n.createElement)("animate",{attributeName:"offset",values:-l/2+"; "+-l/2+"; "+(1+l/2),keyTimes:j,dur:N,repeatCount:"indefinite"})),Object(n.createElement)("stop",{offset:"100%",stopColor:a,stopOpacity:r},t&&Object(n.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+l),keyTimes:j,dur:N,repeatCount:"indefinite"})))))};s.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var u=function(e){return e.children?Object(n.createElement)(s,i({},e)):Object(n.createElement)(l,i({},e))},l=function(e){return Object(n.createElement)(u,i({viewBox:"0 0 476 124"},e),Object(n.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),Object(n.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),Object(n.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),Object(n.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),Object(n.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),Object(n.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},m=u,d=function(e){var t=e.width,a=e.statistic,r=window.innerWidth;t||(t=r>769?480:r);var n=(r>769?.9:1)*t/.885,i=42+o.l+n;return c.a.createElement(m,{viewBox:"0 0 ".concat(t," ").concat(i),height:i,width:t,speed:2,backgroundColor:o.c[a]},c.a.createElement("circle",{cx:.4*t,cy:i/2,r:"5"}),c.a.createElement("circle",{cx:.5*t,cy:i/2,r:"5"}),c.a.createElement("circle",{cx:.6*t,cy:i/2,r:"5"}))},f=a(20),b=a(85),p=a.n(b),h=a(155),g=a.n(h),v=a(83),_=a(27),y=a.n(_),O=a(238),E=a(53),j=a(57),N=(a(156),a(66)),w=a(157),C=a.n(w);var D=function(e){var t=e.obj,a=e.type;return c.a.createElement("div",null,Object.keys(t||{}).map((function(e,r){return Number(t[e])?c.a.createElement("p",{key:a+"-"+r,className:"destination-txt"},function(e){switch(e){case"average_distance_of_arriving_commute":return"Average distance of arriving commutes";case"average_distance_of_departing_commute":return"Average distance of departing commutes";case"bicycle_distance":return"Average distance travelled by bicycle";case"bus_distance":return"Average distance travelled by bus";case"common_arrival_1":return"Most common destination for commutes from";case"common_arrival_2":return"Second most common destination for commutes from";case"common_arrival_3":return"Third most common destination for commutes from";case"common_destination_1":return"Most common destination departing from here";case"common_destination_2":return"Second most common destination departing from here";case"common_destination_3":return"Third most common destination departing from here";case"education_bicycle_count":return"Number of commutes to school by bike";case"education_bus_count":return"Number of commutes to school by bus";case"education_ferry_count":return"Number of commutes to school by ferry";case"education_home_count":return"Studying at home";case"education_other_count":return"Number of commutes to school by other means";case"education_own_vehicle_count":return"Number of commutes to school using own vehicle";case"education_passenger_count":return"Number of commutes to school as a passenger in a vehicle";case"education_train_count":return"Number of commutes to school by train";case"education_walk_or_jog_count":return"Number of commutes to school walking/jogging";case"ferry_distance":return"Average commute distance by ferry";case"home_distance":return"Distance commuted from home";case"number_of_commutes_arriving":return"Number of commutes arriving here";case"number_of_commutes_departing":return"Number of commutes departing from here";case"number_of_people_commuting":return"Number of people commuting from/to this destination";case"other_distance":return"Average commute distance using other means";case"own_vehicle_distance":return"Average commute distance commuting using own vehicle";case"passenger_distance":return"Average commute distance commuting as a passenger in a vehicle";case"total_bicycle_count":return"Number of commutes by bicycle";case"total_bus_count":return"Number of commutes by bus";case"total_ferry_count":return"Number of commutes by ferry";case"total_home_count":return"Number of people working/studying from home";case"total_other_count":return"Number of commutes by other means";case"total_own_vehicle_count":return"Number of commutes using own vehicle";case"total_passenger_count":return"Number of commutes as a passenger";case"total_train_count":return"Number of commutes using train";case"total_walk_or_jog_count":return"Number of commutes walking or jogging";case"train_distance":return"Average commute distance using train";case"walk_or_jog_distance":return"Average commute distance walking or jogging";case"work_bicycle_count":return"Number of commutes to work by bicycle ";case"work_bus_count":return"Number of commutes to work by bus";case"work_ferry_count":return"Number of commutes to work by ferry";case"work_home_count":return"Working from home";case"work_other_count":return"Number of commutes to work by other means";case"work_own_vehicle_count":return"Number of commutes to work using own vehicle";case"work_passenger_count":return"Number of commutes to work as passenger";case"work_train_count":return"Number of commutes to work by train";case"work_walk_or_jog_count":return"Number of commutes to work walking/jogging";default:return""}}(e)+": "+t[e]):""})))},k=Object(n.lazy)((function(){return a.e(14).then(a.bind(null,227))}));var T=function(e){e.hoveredRegion;var t=e.hoveredData,a=(e.highlightedData,e.centroidData),i=e.destinationData,s=e.currentDestinationData,u=Object(O.a)().t,l=Object(n.useState)(o.q),m=Object(r.a)(l,2),d=(m[0],m[1],Object(n.useState)("Total")),f=Object(r.a)(d,2),b=(f[0],f[1],Object(N.c)({count:Math.floor(t.hoveredData.COUNT)||0,from:{count:Math.floor(t.hoveredData.COUNT)||0},config:{tension:500,clamp:!0,duration:350}})),h=Object(N.c)({distance:Math.floor(t.hoveredData.HAVERSINE_DISTANCE)||0,from:{distance:Math.floor(t.hoveredData.HAVERSINE_DISTANCE)||0},config:{tension:500,clamp:!0,duration:350}});return Object(n.useEffect)((function(){}),[s]),c.a.createElement("div",{className:"LeftPanel"},c.a.createElement("div",{className:"title"},c.a.createElement(j.b,{to:"/"},"Commute",c.a.createElement("span",null," New Zealand"))),c.a.createElement(n.Suspense,{fallback:c.a.createElement("div",null)},c.a.createElement(k,{centroidData:a})),c.a.createElement("div",{className:"meta"},c.a.createElement("h2",{className:p()("total")},c.a.createElement("div",null,u("From "),t.hoveredData.DEPARTURE_NAME_1,t.hoveredData.departure_SA22018_V1_NAME&&t.hoveredData.departure_SA22018_V1_NAME.length?", ":"",u(t.hoveredData.departure_SA22018_V1_NAME),c.a.createElement("div",null,u("To "),t.hoveredData.DESTINATION_NAME_1,t.hoveredData.DESTINATION_NAME_1?", ":"",t.hoveredData.destination_SA22018_V1_NAME),c.a.createElement(D,{obj:i[s.from],type:"from"}),c.a.createElement(D,{obj:i[s.to],type:"to"})),c.a.createElement("div",{style:{alignSelf:"center"}},c.a.createElement(N.a.h1,null,h.distance.interpolate((function(e){return e.toFixed(2).toString()+"km"})))))),c.a.createElement("div",{className:"map-stats"},c.a.createElement("div",null,c.a.createElement("div",{className:"stats-bottom"},(t.hoveredData.COMMUTE_TYPE||"").replace(/[_]/g," ").toLowerCase().charAt(0).toUpperCase()+(t.hoveredData.COMMUTE_TYPE||"").replace(/[_]/g," ").substring(1).toLowerCase(),c.a.createElement(N.a.h1,null,b.count.interpolate((function(e){return e>0?Math.floor(e).toFixed()+" people":""}))),c.a.createElement("h2",null,t.hoveredData.TYPE?"Commuting for ":"",(t.hoveredData.TYPE||"").charAt(0)+(t.hoveredData.TYPE||"").substring(1).toLowerCase())))),c.a.createElement("div",{className:"about-wrapper"},c.a.createElement(j.b,{to:"/about"},c.a.createElement("img",{src:C.a,alt:""})),c.a.createElement("h6",{className:p()("footnote")},"\u2020 ","".concat(u("Based on 2018 Census by NZ Statistics, see ")),c.a.createElement("a",{href:"https://datafinder.stats.govt.nz/data/category/census/2018/commuter-view/?_ga=2.217129552.794612537.1592401476-705599149.1592401476",target:"_noblank",style:{color:"#6c757d"}},u("source")),c.a.createElement("br",null),u("Locations have been approximated to protect user privacy"))))},S=Object(n.lazy)((function(){return Promise.all([a.e(9),a.e(6)]).then(a.bind(null,211))})),A=Object(n.lazy)((function(){return a.e(2).then(a.bind(null,223))}));t.default=c.a.memo((function(e){var t,a=e.districtCode,i=e.educationData,s=e.workData,u=e.regionalEducationData,l=e.regionalWorkData,m=e.regionalTotalData,b=e.centroidData,h=e.destinationData,g=e.regionHighlighted,_=e.setRegionHighlighted,j=e.anchor,N=e.setAnchor,w=e.mapStatistic,C=(e.setMapStatistic,e.isCountryLoaded),D=void 0===C||C,k=Object(O.a)().t,x=(Object(E.g)(),Object(n.useRef)()),M=Object(n.useRef)(),R=Object(n.useState)({code:a,view:o.p.COUNTRY,option:o.n.TOTAL}),U=Object(r.a)(R,2),P=U[0],Y=U[1],H=Object(n.useState)({view:o.p.COUNTRY}),I=Object(r.a)(H,2),L=I[0],V=I[1],Z=Object(n.useState)(void 0),W=Object(r.a)(Z,2),z=(W[0],W[1]),q=Object(n.useState)({}),B=Object(r.a)(q,2),F=B[0],K=B[1],J=Object(n.useState)({from:"",to:""}),G=Object(r.a)(J,2),X=G[0],Q=G[1],$=Object(n.useState)(o.q),ee=Object(r.a)($,2),te=(ee[0],ee[1],Object(n.useState)({hoveredData:{},hoveredDestination:""})),ae=Object(r.a)(te,2),re=ae[0],oe=ae[1],ne=Object(n.useState)(["Drive own vehicle"]),ce=Object(r.a)(ne,2),ie=ce[0],se=ce[1],ue=function(){return{educationMapData:P.option!==o.n.WORK?i:[],workMapData:P.option!==o.n.EDUCATION?s:[]}},le=Object(n.useState)(ue),me=Object(r.a)(le,2),de=me[0],fe=me[1];o.m[P.code],Object(n.useEffect)((function(){fe(ue),Y({code:g.districtCode,view:o.p.COUNTRY,option:P.option})}),[D,g.districtCode,g.districtName,P.code,P.option,P.view]);var be=Object(n.useCallback)((function(e){var t=o.m[e];if(t)if(t.mapType===o.p.STATE){var a=i[e].districts||{},r=Object.keys(a).sort((function(e,t){return Object(f.e)(a[t],"total",w)-Object(f.e)(a[e],"total",w)}))[0];y.a.unstable_batchedUpdates((function(){_({districtCode:e,cityName:r}),Y({code:e,view:o.p.COUNTRY,option:P.option})}))}else y.a.unstable_batchedUpdates((function(){Y({code:"NZ",view:o.p.COUNTRY,option:P.option}),_({districtCode:"NZ",cityName:null})}))}),[i,s,P.option,w,_]);Object(n.useEffect)((function(){be(a)}),[a,be]);var pe=Object(n.useMemo)((function(){var e,t,a=(g.districtCode?null===(e=i[g.districtCode])||void 0===e?void 0:null===(t=e.districts)||void 0===t?void 0:t[g.cityName]:i[g.districtCode])||{};return Object(v.a)(a,(function(e){e.name=g.districtCode||o.b[g.districtCode],g.districtCode||(e.population_millions=o.i[g.districtCode])}))}),[i,s,g.districtCode,g.cityName]);return c.a.createElement("div",{className:p()("MapExplorer",{stickied:"mapexplorer"===j},{hidden:j&&"mapexplorer"!==j})},window.innerWidth>769&&c.a.createElement("div",{className:p()("anchor",{stickied:"mapexplorer"===j}),onClick:function(){N("mapexplorer"===j?null:"mapexplorer")}}),c.a.createElement("div",{ref:x},w&&c.a.createElement(n.Suspense,{fallback:c.a.createElement(d,Object.assign({className:"map-loader"},{width:null===(t=x.current)||void 0===t?void 0:t.clientWidth,statistic:w}))},c.a.createElement("div",{className:"main-wrapper"},c.a.createElement(T,{hoveredRegion:pe,hoveredData:re,highlightedData:F,centroidData:b,destinationData:h,currentDestinationData:X}),c.a.createElement("div",{className:"map-wrapper"},c.a.createElement(S,{currentMap:P,data:de,regionalEducationData:u,regionalWorkData:l,regionalTotalData:m,centroidData:b,setRegionalData:z,currentView:L,setCurrentView:V,changeMap:be,regionHighlighted:g,setRegionHighlighted:_,setHighlightedData:K,setHoveredData:oe,statistic:w,isCountryLoaded:D,currentCommuteTypes:ie,leafletMapRef:M,setCurrentDestinationData:Q}),c.a.createElement("div",{className:"tabs-container"},c.a.createElement("div",{className:"tabs-map"},Object.values(o.n).map((function(e){return c.a.createElement("div",{key:e,className:p()("tab",{focused:P.option===e}),onClick:function(){return function(e){Y({code:P.code,view:o.p.COUNTRY,option:e}),L.view===o.p.COUNTRY&&_({districtCode:g.districtCode,cityName:null})}(e)}},c.a.createElement("h4",{className:e,style:{color:o.e[e.toUpperCase()]}},k(e)))}))))),c.a.createElement("div",{className:"commutes-wrapper"},Object.values(o.q).map((function(e,t){return c.a.createElement(A,{commuteType:e,currentCommuteTypes:ie,setCurrentCommuteTypes:se,key:t})})))))))}),(function(e,t){var a,r,o,n,c,i,s,u,l,m;return!!g()(e.stateCode,t.stateCode)&&(!!g()(e.regionHighlighted,t.regionHighlighted)&&(!!g()(e.mapStatistic,t.mapStatistic)&&(!!g()(e.anchor,t.anchor)&&(!!g()(null===(a=e.educationData)||void 0===a?void 0:null===(r=a.NZ)||void 0===r?void 0:null===(o=r.meta)||void 0===o?void 0:o.last_updated,null===(n=t.educationData)||void 0===n?void 0:null===(c=n.NZ)||void 0===c?void 0:null===(i=c.meta)||void 0===i?void 0:i.last_updated)&&!!g()(null===(s=e.educationData)||void 0===s?void 0:null===(u=s.NZ)||void 0===u?void 0:u.total,null===(l=t.educationData)||void 0===l?void 0:null===(m=l.NZ)||void 0===m?void 0:m.total)))))}))},85:function(e,t,a){var r;!function(){"use strict";var a={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var n=typeof r;if("string"===n||"number"===n)e.push(r);else if(Array.isArray(r)&&r.length){var c=o.apply(null,r);c&&e.push(c)}else if("object"===n)for(var i in r)a.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()}}]);
//# sourceMappingURL=MapExplorer.4538e9a7.chunk.js.map